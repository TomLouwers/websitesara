<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

    <!-- iOS/Safari specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="OefenPlatform">

    <!-- Android/Chrome specific meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#FF8A34">

    <!-- Prevent format detection -->
    <meta name="format-detection" content="telephone=no">

    <title>CITO Oefenplatform - Gratis oefenen voor groep 3-8</title>
    <!-- Preconnect to Google Fonts for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/styles.min.css?v=20251228">
    <link rel="stylesheet" href="static/css/verhoudingstabel-widget.min.css?v=20251228">
    <link rel="stylesheet" href="static/css/gamification.css?v=20260106">
</head>
<body>
    <div class="container">
        <!-- Navigation - Master Configuration Design -->
        <nav class="main-nav">
            <div class="nav-content">
                <!-- Left: Logo + Brand + Tagline -->
                <div class="nav-brand">
                    <div class="nav-logo">
                        <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="20" cy="20" r="20" fill="#FF8A34"/>
                            <text x="20" y="28" font-family="Nunito, sans-serif" font-size="24" font-weight="800" fill="white" text-anchor="middle">O</text>
                        </svg>
                    </div>
                    <div class="nav-brand-text">
                        <div class="nav-brand-name">OefenPlatform</div>
                        <div class="nav-brand-tagline">Leren met plezier! ğŸš€</div>
                    </div>
                </div>

                <!-- Right: Link + Primary Button -->
                <div class="nav-right">
                    <a href="ouders.html" class="nav-link">Voor Ouders & Leraren</a>
                    <button class="btn-nav-accessibility" id="accessibilityToggle" aria-label="Toegankelijkheidsopties">
                        <i class="material-icons">accessibility</i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Hero Section - Master Configuration Design -->
        <section class="hero-section">
            <div class="hero-container">
                <!-- Left Column -->
                <div class="hero-left">
                    <!-- Pill Badges -->
                    <div class="hero-badges">
                        <span class="badge-pill badge-blue">CITO-niveau</span>
                        <span class="badge-pill badge-orange">10 vakgebieden</span>
                    </div>

                    <!-- Headline -->
                    <h1 class="hero-headline">
                        Oefen als een <span class="gradient-text">Pro</span> voor je <span class="highlight-cito">CITO</span>! ğŸš€
                    </h1>

                    <!-- Subtext -->
                    <p class="hero-subtext">
                        Het leukste oefenplatform van Nederland! Speciaal voor groep 3 t/m 8. Train je skills en word steeds beter!
                    </p>

                    <!-- Bullet List -->
                    <ul class="hero-features">
                        <li>
                            <span class="check-icon">âœ“</span>
                            <span>Meer dan 5.000 oefenvragen</span>
                        </li>
                        <li>
                            <span class="check-icon">âœ“</span>
                            <span>Directe feedback bij elk antwoord</span>
                        </li>
                        <li>
                            <span class="check-icon">âœ“</span>
                            <span>Volledig gratis & veilig</span>
                        </li>
                        <li>
                            <span class="check-icon">âœ“</span>
                            <span>Geen advertenties op de toets pagina's</span>
                        </li>
                    </ul>

                    <!-- CTA Buttons -->
                    <div class="hero-cta-row">
                        <button class="btn-hero-primary" onclick="document.querySelector('.subject-grid').scrollIntoView({ behavior: 'smooth', block: 'start' })">
                            Begin met oefenen
                        </button>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="hero-right">
                    <div class="quiz-card-demo">
                        <!-- Success Badge -->
                        <div class="success-badge">ğŸ‰ Goed gedaan!</div>

                        <!-- Floating Star Button -->
                        <button class="floating-action-btn">â­</button>

                        <!-- Points Pill -->
                        <div class="quiz-card-points-pill">â­ +10 punten</div>

                        <!-- Card Header -->
                        <div class="quiz-card-header">
                            <div class="quiz-card-subject">
                                <span class="subject-icon">ğŸ“–</span>
                                <span>Begrijpend Lezen</span>
                            </div>
                            <div class="quiz-card-progress">Vraag 3 van 10</div>
                        </div>

                        <!-- Question Area -->
                        <div class="quiz-card-question">
                            <p>Wat is de hoofdgedachte van het tweede deel van de tekst?</p>
                        </div>

                        <!-- Answer Options -->
                        <div class="quiz-card-answers">
                            <div class="answer-option selected">
                                <span class="option-label">A</span>
                                <span class="option-text">De oorzaken van het probleem</span>
                            </div>
                            <div class="answer-option">
                                <span class="option-label">B</span>
                                <span class="option-text">De oplossing van het probleem</span>
                            </div>
                            <div class="answer-option">
                                <span class="option-label">C</span>
                                <span class="option-text">De gevolgen van het probleem</span>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button class="quiz-card-submit">
                            Check mijn antwoord!
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <div id="landingPage">
            <!-- Resume Quiz Banner -->
            <div id="resumeBanner" class="resume-banner" style="display: none;">
                <div class="resume-content">
                    <i class="material-icons">info</i>
                    <div class="resume-text">
                        <strong>Gepauzeerde quiz gevonden!</strong>
                        <span id="resumeDetails">Je hebt een quiz gepauzeerd.</span>
                    </div>
                </div>
                <div class="resume-actions">
                    <button class="btn btn-primary" onclick="resumePausedQuiz()">
                        <i class="material-icons">play_arrow</i> Verder gaan!
                    </button>
                    <button class="btn btn-secondary" onclick="clearPausedQuiz()">
                        <i class="material-icons">close</i> Later proberen
                    </button>
                </div>
            </div>

            <!-- Subject Selection Intro -->
            <div class="subject-intro">
                <h2 class="section-title">
                    Wat wil je oefenen? ğŸ¯
                </h2>
                <p class="section-subtitle">Kies een onderwerp en begin direct met oefenen. Elke vraag maakt je beter!</p>
            </div>

            <div class="subject-grid">
                <!-- Row 1: Taal & Lezen -->
                <a href="level-selector.html?subject=begrijpendlezen" class="subject-card" data-subject="begrijpendlezen" data-color="#FFD86F" style="--animation-order: 0;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ“–</span>
                            </div>
                            <h3 class="card-title">Begrijpend Lezen</h3>
                        </div>
                        <p class="card-description">Train je lees-skills! Leer teksten begrijpen en vragen beantwoorden.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>1527 vragen</span>
                            </span>
                            <span class="stat-pill">Groep 4-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=woordenschat" class="subject-card" data-subject="woordenschat" data-color="#38C172" style="--animation-order: 1;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ“š</span>
                            </div>
                            <h3 class="card-title">Woordenschat</h3>
                        </div>
                        <p class="card-description">Vergroot je woordenschat! Leer nieuwe woorden en hun betekenis.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>268 vragen</span>
                            </span>
                            <span class="stat-pill">Groep 4-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=werkwoordspelling" class="subject-card" data-subject="werkwoordspelling" data-color="#60A5FA" style="--animation-order: 2;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>âœï¸</span>
                            </div>
                            <h3 class="card-title">Werkwoordspelling</h3>
                        </div>
                        <p class="card-description">Leer werkwoorden correct spellen! Oefen met dt, d of t en meer.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>Dictee oefeningen</span>
                            </span>
                            <span class="stat-pill">Groep 3-7</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=dmt" class="subject-card" data-subject="dmt" data-color="#FF6B9D" style="--animation-order: 3;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>âš¡</span>
                            </div>
                            <h3 class="card-title">DMT Woordtrainer</h3>
                        </div>
                        <p class="card-description">Train je leessnelheid! Oefen met woorden in verschillende moeilijkheidsgraden.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>750 woorden</span>
                            </span>
                            <span class="stat-pill">Groep 3-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>

                <!-- Row 2: Rekenen -->
                <a href="level-selector.html?subject=verhaaltjessommen" class="subject-card" data-subject="verhaaltjessommen" data-color="#FF7AB8" style="--animation-order: 4;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ“</span>
                            </div>
                            <h3 class="card-title">Verhaaltjessommen</h3>
                        </div>
                        <p class="card-description">Los rekenpuzzels op! Leuke verhalen met sommen.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>520 vragen</span>
                            </span>
                            <span class="stat-pill">Groep 3-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=basisvaardigheden" class="subject-card" data-subject="basisvaardigheden" data-color="#B794F4" style="--animation-order: 5;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ”¢</span>
                            </div>
                            <h3 class="card-title">Getal & Bewerking</h3>
                        </div>
                        <p class="card-description">Word steeds sneller met sommen! Train optellen, aftrekken, vermenigvuldigen en delen.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>1253 vragen</span>
                            </span>
                            <span class="stat-pill">Groep 3-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=meetkunde" class="subject-card" data-subject="meetkunde" data-color="#F59E0B" style="--animation-order: 6;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ“</span>
                            </div>
                            <h3 class="card-title">Meetkunde</h3>
                        </div>
                        <p class="card-description">Ontdek vormen en ruimte! Oefen met hoeken, lijnen, figuren en meer.</p>
                        <div class="card-stats">
                            <span class="stat-pill">Binnenkort beschikbaar</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=breuken" class="subject-card" data-subject="breuken" data-color="#8B5CF6" style="--animation-order: 7;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>Â½</span>
                            </div>
                            <h3 class="card-title">Breuken & Procenten</h3>
                        </div>
                        <p class="card-description">Leer rekenen met breuken en procenten! Van halve appels tot kortingen.</p>
                        <div class="card-stats">
                            <span class="stat-pill">Binnenkort beschikbaar</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>

                <!-- Row 3: Algemene Vaardigheden -->
                <a href="level-selector.html?subject=studievaardigheden" class="subject-card" data-subject="studievaardigheden" data-color="#10B981" style="--animation-order: 8;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸ“</span>
                            </div>
                            <h3 class="card-title">Studievaardigheden</h3>
                        </div>
                        <p class="card-description">Leer hoe je leert! Plannen, structureren en effectief studeren.</p>
                        <div class="card-stats">
                            <span class="stat-pill">Binnenkort beschikbaar</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
                <a href="level-selector.html?subject=wereldorientatie" class="subject-card" data-subject="wereldorientatie" data-color="#2CC6A3" style="--animation-order: 9;">
                    <div class="card-top-bar"></div>
                    <div class="card-body">
                        <div class="card-header-row">
                            <div class="card-icon">
                                <span>ğŸŒ</span>
                            </div>
                            <h3 class="card-title">WereldoriÃ«ntatie</h3>
                        </div>
                        <p class="card-description">Leer meer over de wereld! Geschiedenis, aardrijkskunde, natuur en techniek.</p>
                        <div class="card-stats">
                            <span class="stat-pill">
                                <span class="stat-dot"></span>
                                <span>649 vragen</span>
                            </span>
                            <span class="stat-pill">Groep 3-8</span>
                        </div>
                    </div>
                    <div class="card-cta-band">
                        <span>Start oefenen â†’</span>
                    </div>
                </a>
            </div>

            <!-- Metrics + Trust Section -->
            <section class="metrics-trust-section">
                <!-- Trust Title + Subtitle -->
                <div class="trust-header">
                    <h2 class="trust-title">Waarom OefenPlatform? ğŸ’ª</h2>
                    <p class="trust-subtitle">Ontworpen met zorg voor kinderen Ã©n de volwassenen die hen begeleiden.</p>
                </div>

                <!-- Benefit Cards -->
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon" style="background-color: rgba(56, 193, 114, 0.15);">ğŸ›¡ï¸</div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">100% Veilig</h3>
                            <p class="benefit-description">Geen advertenties, geen tracking, geen afleidingen. Volledig veilig voor kinderen.</p>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon" style="background-color: rgba(255, 138, 52, 0.15);">ğŸ“</div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">CITO-Niveau</h3>
                            <p class="benefit-description">Alle vragen zijn afgestemd op de actuele CITO-leerdoelen en het basisonderwijs curriculum.</p>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon" style="background-color: rgba(183, 148, 244, 0.15);">ğŸ‘¨â€ğŸ«</div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Gemaakt door Experts</h3>
                            <p class="benefit-description">Ontwikkeld door onderwijsprofessionals met jarenlange ervaring in het basisonderwijs.</p>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon" style="background-color: rgba(44, 198, 163, 0.15);">ğŸ’š</div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Gratis Toegankelijk</h3>
                            <p class="benefit-description">Volledig gratis te gebruiken. Geen verborgen kosten, geen abonnementen.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Large Gradient CTA Banner -->
            <section class="cta-banner">
                <div class="cta-icon-circle">ğŸš€</div>
                <h2 class="cta-heading">Klaar om te beginnen? ğŸ¯</h2>
                <p class="cta-subline">Meer dan 5.000 oefenvragen wachten op jou. Begin vandaag nog en word elke dag een beetje beter!</p>
                <div class="cta-buttons">
                    <button class="cta-btn-primary" onclick="document.querySelector('.subject-grid').scrollIntoView({ behavior: 'smooth', block: 'start' })">Begin met oefenen</button>
                    <button class="cta-btn-secondary" onclick="window.location.href='ouders.html'">Meer informatie</button>
                </div>
                <p class="cta-benefits-line">âœ“ Gratis âœ“ Geen account nodig âœ“ Direct starten</p>
            </section>

            <!-- Footer -->
            <footer class="main-footer">
                <div class="footer-content">
                    <!-- Left Column: Brand -->
                    <div class="footer-column footer-brand">
                        <div class="footer-logo">
                            <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="20" cy="20" r="20" fill="#FF8A34"/>
                                <text x="20" y="28" font-family="Nunito, sans-serif" font-size="24" font-weight="800" fill="white" text-anchor="middle">O</text>
                            </svg>
                            <span class="footer-logo-text">OefenPlatform</span>
                        </div>
                        <p class="footer-description">Het leukste oefenplatform van Nederland! Speciaal gemaakt voor kinderen in groep 3 tot en met 8. CITO-niveau, zonder advertenties, met plezier leren.</p>
                        <div class="footer-badges">
                            <span class="footer-badge">Veilig</span>
                            <span class="footer-badge">CITO-niveau</span>
                            <span class="footer-badge">Gratis</span>
                        </div>
                    </div>

                    <!-- Middle Column: Snel naar -->
                    <div class="footer-column">
                        <h4 class="footer-column-title">Snel naar</h4>
                        <ul class="footer-links">
                            <li><a href="#home" onclick="goToLanding(); return false;">Alle Oefenonderwerpen</a></li>
                            <li><a href="#home" onclick="loadSubject('begrijpendlezen'); return false;">Begrijpend Lezen</a></li>
                            <li><a href="#home" onclick="showLevelSelection('verhaaltjessommen'); return false;">Rekenen</a></li>
                            <li><a href="#home" onclick="loadSubject('samenvatten'); return false;">Taal</a></li>
                        </ul>
                    </div>

                    <!-- Right Column: Voor Volwassenen -->
                    <div class="footer-column">
                        <h4 class="footer-column-title">Voor Volwassenen</h4>
                        <ul class="footer-links">
                            <li><a href="ouders.html">Voor Ouders</a></li>
                            <li><a href="ouders.html">Voor Leraren</a></li>
                            <li><a href="ouders.html">Over Ons</a></li>
                            <li><a href="ouders.html">Contact</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Bottom Footer Bar -->
                <div class="footer-bottom">
                    <p class="footer-copyright">Â© 2025 OefenPlatform. Gemaakt met â¤ï¸ voor Nederlandse kinderen.</p>
                    <div class="footer-bottom-links">
                        <a href="ouders.html">Privacy</a>
                        <a href="ouders.html">Voorwaarden</a>
                    </div>
                </div>
            </footer>
        </div>
        </div>

        <div id="levelPage" style="display: none;">
            <!-- Compact Contextual Header -->
            <div class="level-page-header">
                <div class="breadcrumb">
                    <a href="#" onclick="goToLanding(); return false;">Home</a>
                    <span class="breadcrumb-separator">â€º</span>
                    <span class="breadcrumb-current" id="levelBreadcrumb">WereldoriÃ«ntatie</span>
                </div>
                <div class="level-header-content">
                    <div class="level-subject-icon" id="levelSubjectIcon">
                        <i class="material-icons">public</i>
                    </div>
                    <div class="level-header-text">
                        <h1 id="levelTitle" class="level-page-title">WereldoriÃ«ntatie</h1>
                        <p class="level-page-subtitle">Kies jouw niveau om te beginnen!</p>
                        <p class="level-page-description" id="levelDescription">Ontdek alles over de aarde, geschiedenis, natuur en techniek</p>
                    </div>
                </div>
            </div>

            <!-- Level Selection Grid -->
            <div class="level-selection-container">
                <div id="levelGrid" class="level-selection-grid"></div>
                <div class="level-back-button">
                    <button class="btn btn-secondary" onclick="goToLanding()">
                        <i class="material-icons">arrow_back</i> Kies ander vak
                    </button>
                </div>
            </div>
        </div>

        <div id="themePage" style="display: none;">
            <!-- Motivational Theme Selection Header -->
            <div class="theme-page-header">
                <div class="breadcrumb">
                    <a href="#" onclick="goToLanding(); return false;">Home</a>
                    <span class="breadcrumb-separator">â€º</span>
                    <span class="breadcrumb-current" id="themeBreadcrumb">WereldoriÃ«ntatie</span>
                </div>
                <div class="theme-header-content">
                    <h1 id="subjectTitle" class="theme-page-title">Kies wat je wilt oefenen!</h1>
                    <p class="theme-page-subtitle">Start met alle thema's of kies een specifiek onderwerp</p>
                </div>
            </div>

            <!-- Theme Selection Container -->
            <div class="theme-selection-container">
                <!-- Primary CTA and subtopics will be inserted here by JavaScript -->
                <div id="themeGrid" class="theme-grid-container"></div>

                <div class="theme-back-button">
                    <button class="btn btn-secondary" onclick="goToLanding()">
                        <i class="material-icons">arrow_back</i> Kies ander vak
                    </button>
                </div>
            </div>
        </div>

        <div id="quizPage" class="quiz-container" style="display: none;">
            <!-- Bold Colorful Progress Bar at Top -->
            <div class="quiz-progress-bar-container">
                <div class="quiz-progress-info">
                    <span id="progressLabel" class="progress-label">Vraag 1 van 10</span>
                    <span id="progressPercentage" class="progress-percentage">10% voltooid</span>
                </div>
                <div class="quiz-progress-bar">
                    <div id="progressBarFill" class="quiz-progress-fill" style="width: 10%"></div>
                </div>
            </div>

            <!-- Breadcrumb Navigation -->
            <nav class="breadcrumb" id="breadcrumb" aria-label="breadcrumb">
                <a href="#" onclick="goToLanding(); return false;">Home</a>
                <span class="breadcrumb-separator">â€º</span>
                <span id="breadcrumbSubject">Onderwerp</span>
                <span class="breadcrumb-separator" id="breadcrumbLevelSep" style="display:none;">â€º</span>
                <span id="breadcrumbLevel" style="display:none;">Niveau</span>
                <span class="breadcrumb-separator">â€º</span>
                <span class="breadcrumb-current">Quiz</span>
            </nav>

            <!-- Quiz Header - Minimal, Clean -->
            <div class="quiz-header-minimal">
                <h2 id="quizTitle">Quiz</h2>

                <!-- Gamification Mini Profile -->
                <div id="gamification-mini-profile" style="margin-right: 12px;"></div>

                <!-- Quiz Control Icons (top-right) -->
                <div class="quiz-header-controls">
                    <button class="btn-icon" id="focusModeToggle" onclick="toggleFocusMode()" title="Focus Modus">
                        <i class="material-icons">visibility_off</i>
                    </button>
                    <button class="btn-icon" id="lovaHelpButton" onclick="toggleLovaPanel()" title="L.O.V.A. Stappenplan" style="display: none;">
                        <i class="material-icons">help_outline</i>
                    </button>
                    <button class="btn-icon" onclick="pauseQuiz()" title="Pauzeer">
                        <i class="material-icons">pause</i>
                    </button>
                    <button class="btn-icon" onclick="stopQuiz()" title="Stop">
                        <i class="material-icons">stop</i>
                    </button>
                </div>

                <!-- Progress Summary (compact) -->
                <div class="quiz-progress-summary">
                    <span class="progress-stat correct">âœ“ <span id="totalCorrect">0</span> goed</span>
                    <span class="progress-stat" style="color: var(--secondary-color);">ğŸ“‹ <span id="lovaClicks">0</span> hulp</span>
                </div>
            </div>

            <!-- Milestone Celebration (moved outside header for better positioning) -->
            <div id="milestoneCelebration" class="milestone-celebration hidden">
                <i class="material-icons celebration-icon">celebration</i>
                <span id="milestoneMessage">Goed bezig!</span>
            </div>

            <!-- Question Card Container -->
            <div class="question-card">
                <div class="question-container">
                    <div id="readingContent" class="reading-content hidden"></div>
                    <div class="question-text" id="questionText"></div>

                    <!-- Hint Container (voor scaffolding hints) -->
                    <div id="hintContainer" style="text-align: center; margin: 20px 0;"></div>

                    <!-- L.O.V.A. Help Panel (collapsible guidance) -->
                    <div id="lovaHelpPanel" class="lova-help-panel hidden">
                        <div class="lova-help-content">
                            <!-- Stap 1: Lezen -->
                            <div class="lova-help-step">
                                <h4 class="lova-help-step-title">ğŸ“– Stap 1: Lezen</h4>
                                <div class="lova-help-section">
                                    <p><strong>Wat wordt er gevraagd?</strong></p>
                                    <p id="lovaHelpHoofdvraag" class="lova-help-text"></p>
                                </div>
                                <div class="lova-help-section">
                                    <p><strong>Let op: dit is ruis (niet nodig voor deze vraag):</strong></p>
                                    <ul id="lovaHelpRuis" class="lova-help-list"></ul>
                                </div>
                                <div class="lova-help-section">
                                    <p><strong>Tussenstappen:</strong></p>
                                    <ul id="lovaHelpTussenstappen" class="lova-help-list"></ul>
                                </div>
                            </div>

                            <!-- Stap 2: Ordenen -->
                            <div class="lova-help-step">
                                <h4 class="lova-help-step-title">ğŸ—ƒï¸ Stap 2: Ordenen</h4>
                                <div class="lova-help-section">
                                    <p><strong>Relevante getallen:</strong></p>
                                    <ul id="lovaHelpGetallen" class="lova-help-list"></ul>
                                </div>
                                <div class="lova-help-section">
                                    <p><strong>Wiskundige tool:</strong></p>
                                    <p id="lovaHelpTool" class="lova-help-text"></p>
                                </div>
                            </div>

                            <!-- Stap 3: Vormen -->
                            <div class="lova-help-step">
                                <h4 class="lova-help-step-title">âœï¸ Stap 3: Vormen</h4>
                                <div id="lovaHelpBewerkingen" class="lova-help-bewerkingen"></div>
                            </div>

                            <!-- Stap 4: Antwoorden -->
                            <div class="lova-help-step">
                                <h4 class="lova-help-step-title">âœ… Stap 4: Antwoorden</h4>
                                <div class="lova-help-section">
                                    <p><strong>Verwachte eenheid:</strong> <span id="lovaHelpEenheid" class="lova-help-text"></span></p>
                                </div>
                                <div class="lova-help-section">
                                    <p><strong>Logica check:</strong></p>
                                    <p id="lovaHelpLogica" class="lova-help-text"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Answer Options Container -->
                <div class="answers-section">
                    <div id="optionsContainer" class="options-container"></div>
                    <textarea id="textareaAnswer" class="textarea-answer hidden" placeholder="Typ hier je antwoord..."></textarea>
                </div>

                <!-- Feedback Section -->
                <div id="feedbackSection" class="feedback-card hidden">
                    <div class="feedback-icon" id="feedbackIcon"></div>
                    <h4 id="feedbackTitle"></h4>
                    <p id="feedbackMessage"></p>
                    <p id="correctAnswerDisplay" class="hidden"></p>
                    <div id="verhoudingstabelContainer"></div>
                    <p id="extraInfoDisplay" class="hidden"></p>
                    <div id="strategyAndTips" class="hidden">
                        <h4>Strategie</h4>
                        <p id="strategyText"></p>
                        <h4>Tips</h4>
                        <ul id="tipsList"></ul>
                    </div>
                </div>
            </div>

            <!-- Action Buttons - Clear Hierarchy -->
            <div class="quiz-actions">
                <button class="btn btn-primary-action" id="submitBtn" onclick="submitAnswer()">
                    <i class="material-icons">check_circle</i> Check mijn antwoord!
                </button>
                <button class="btn btn-primary-action hidden" id="nextBtn" onclick="nextQuestion()">
                    Volgende! <i class="material-icons">arrow_forward</i>
                </button>

                <!-- Secondary Actions -->
                <div class="quiz-secondary-actions">
                    <button class="btn-secondary-action" onclick="goToLanding()" title="Ga terug">
                        <i class="material-icons">arrow_back</i> Ga terug
                    </button>
                </div>
            </div>
        </div>

        <div id="resultsPage" class="results-container" style="display: none;">
            <!-- 1. Hero Block: Emotional Summary -->
            <div class="result-hero">
                <div class="result-emoji" id="resultEmoji">ğŸ‰</div>
                <h1 class="result-headline" id="resultHeadline">Knap gewerkt!</h1>
                <p class="result-summary" id="resultSummary">Je hebt 8 vragen goed beantwoord!</p>
                <div class="result-growth-badge" id="resultGrowthBadge">
                    <span class="growth-icon">â­</span>
                    <span id="growthText">Je hebt 2 leerpunten verdiend!</span>
                </div>
            </div>

            <!-- 2. Skills Overview: Progress Chips -->
            <div class="skills-overview" id="skillsOverview">
                <h2 class="section-heading">ğŸ“Š Wat heb je geoefend?</h2>
                <div class="skills-chips" id="skillsChips">
                    <!-- Skills chips will be inserted here dynamically -->
                </div>
            </div>

            <!-- 3. Question Cards: Collapsible Accordion -->
            <div class="question-review-section" id="questionReviewSection">
                <h2 class="section-heading">ğŸ’¡ Jouw groeikansen</h2>
                <p class="section-description">Klik op een vraag om de uitleg te zien</p>
                <div class="question-accordion" id="questionAccordion">
                    <!-- Accordion items will be inserted here dynamically -->
                </div>
            </div>

            <!-- 4. Primary CTA -->
            <div class="result-actions">
                <button class="btn-result-primary" onclick="restartQuiz()">
                    <span class="btn-icon">ğŸ”</span>
                    <span>Nog een keer oefenen!</span>
                </button>

                <!-- 5. Secondary CTA -->
                <button class="btn-result-secondary" onclick="goToLanding()">
                    <i class="material-icons">arrow_back</i>
                    <span>Terug naar overzicht</span>
                </button>
            </div>
        </div>

        <div id="reviewPage" class="results-container" style="display: none;">
            <h2 style="color: var(--primary-color); margin-bottom: 20px;">ğŸ“š Leer van je fouten â€” zo word je beter!</h2>
            <div class="results-score" id="reviewScore">0/0</div>
            <div class="results-message" id="reviewMessage">Kijk goed naar deze vragen â€” elke fout maakt je slimmer! ğŸ’ª</div>

            <div id="wrongAnswersContainer" style="margin-top: 30px;">
                <!-- Wrong answers will be dynamically inserted here -->
            </div>

            <button class="btn" onclick="goToLanding()" style="margin-top: 30px;">
                <i class="material-icons">refresh</i> Nog een keer oefenen!
            </button>
        </div>
    </div>

    <!-- Foutanalyse Modaal (Fout Antwoord) -->
    <div id="foutanalyseModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2 id="modaalTitle">ğŸ’¡ Bijna! Je komt er wel! ğŸ‘€âœ¨</h2>
                <button class="modaal-close" onclick="closeFoutanalyseModaal()">âœ•</button>
            </div>

            <!-- Error Type Badge -->
            <div id="errorBadge" class="error-badge"></div>

            <!-- Foutanalyse Section -->
            <div class="fault-analysis-section">
                <h3>Laten we samen kijken! ğŸ’¡</h3>
                <p id="mainExplanation" class="main-explanation"></p>

                <!-- Reflection Question -->
                <div id="reflectionBox" class="reflection-box" style="display: none;">
                    <div class="reflection-header">
                        <span class="reflection-icon">ğŸ¤”</span>
                        <strong>REFLECTIEVRAAG:</strong>
                    </div>
                    <p id="reflectionText" class="reflection-text"></p>
                </div>
            </div>

            <!-- Visual Aid Section -->
            <div id="visualAidSection" class="visual-aid-section" style="display: none;">
                <h4>
                    <span class="visual-icon">ğŸ“Š</span>
                    <span id="visualAidTitle"></span>
                </h4>
                <div id="visualAidContent" class="visual-content"></div>
                <button id="videoButton" class="video-button" style="display: none;">
                    â–¶ï¸ Bekijk Uitleg: <span id="videoTitle"></span>
                </button>
            </div>

            <!-- Remedial Section -->
            <div id="remedialSection" class="remedial-section" style="display: none;">
                <div class="remedial-alert">
                    ğŸ’ª Extra oefening maakt je sterker!
                </div>
                <p id="remedialExplanation" class="remedial-explanation"></p>
                <button id="remedialCta" class="remedial-cta">
                    <span class="cta-icon">ğŸ¯</span>
                    <span id="remedialCtaText" class="cta-text"></span>
                </button>
                <div class="exercise-info">
                    <span class="info-icon">â„¹ï¸</span>
                    <span>5 eenvoudige oefenopgaven</span>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="closeFoutanalyseModaal()">
                    Probeer Opnieuw
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modaal (na juist antwoord) -->
    <div id="successModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2>âœ… Goed gedaan! Hier is de uitleg</h2>
                <button class="modaal-close" onclick="closeSuccessModaal()">âœ•</button>
            </div>

            <!-- L.O.V.A. Accordion -->
            <div class="lova-accordion">
                <button class="accordion-toggle" onclick="toggleLovaAccordion()">
                    <span id="lovaToggleIcon">â–¼</span>
                    ğŸ“š L.O.V.A. Stappenplan (klik om uit te klappen)
                </button>
                <div id="lovaContent" class="accordion-content">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Berekening Tabel -->
            <div class="berekening-section">
                <h3>ğŸ§® Berekening Stap voor Stap</h3>
                <div id="berekeningTable"></div>
            </div>

            <!-- Concept Box -->
            <div class="concept-box">
                <h3>ğŸ’¡ Dit moet je weten</h3>
                <p id="conceptText"></p>
            </div>

            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="nextQuestion()">
                    Volgende Vraag
                </button>
            </div>
        </div>
    </div>

    <!-- Accessibility Settings Panel -->
    <div class="accessibility-panel" id="accessibilityPanel">
        <h3>â™¿ Toegankelijkheidsopties</h3>

        <!-- Font Size Control -->
        <div class="accessibility-option">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="option-icon">ğŸ” </span>
                <span style="font-weight: 600;">Lettergrootte</span>
            </div>
            <div class="font-size-group">
                <button class="font-size-btn active" data-size="standard">Standaard</button>
                <button class="font-size-btn" data-size="groot">Groot</button>
                <button class="font-size-btn" data-size="extra-groot">Extra Groot</button>
            </div>
        </div>

        <!-- Dyslexia Mode -->
        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="dyslexiaMode">
                <span class="option-icon">ğŸ§ </span>
                <span>Dyslexie-modus (Lexend)</span>
            </label>
        </div>

        <!-- Focus Mode -->
        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="focusMode">
                <span class="option-icon">ğŸ¯</span>
                <span>Focus-modus (minimale afleiding)</span>
            </label>
        </div>

        <!-- High Contrast Mode -->
        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="highContrastMode">
                <span class="option-icon">ğŸ¨</span>
                <span>Hoog contrast</span>
            </label>
        </div>
    </div>

    <script src="static/js/config.min.js?v=20251228" defer></script>
    <script src="static/js/utils.min.js?v=20251228" defer></script>
    <script src="static/js/verhoudingstabel-widget.min.js?v=20251228" defer></script>
    <script src="static/js/foutanalyse-modaal.min.js?v=20251228" defer></script>

    <!-- Gamification system (cross-session, localStorage) -->
    <script src="static/src/gamification.js?v=20260106"></script>
    <script src="static/src/gamification-ui.js?v=20260106"></script>

    <script src="static/js/app.min.js?v=20251228" defer></script>
    <script src="static/js/accessibility.min.js?v=20251228" defer></script>

    <script>
        // Global gamification instances
        let gamificationManager = null;
        let gamificationUI = null;

        // Initialize gamification on page load
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Initialize gamification manager (works across sessions)
                gamificationManager = new GamificationManager({
                    grade: 4, // Default grade, will update based on quiz
                    playerName: localStorage.getItem('playerName') || 'Leerling'
                });

                // Initialize gamification UI
                gamificationUI = new GamificationUI(gamificationManager);

                // Update daily streak
                const streakInfo = gamificationManager.updateDailyStreak();
                if (streakInfo.increased) {
                    // Show streak update notification after a delay
                    setTimeout(() => {
                        gamificationUI.showStreakUpdate(streakInfo.currentStreak);
                    }, 1000);
                }

                console.log('âœ… Gamification system initialized', {
                    enabled: gamificationManager.storageAvailable,
                    level: gamificationManager.profile.level,
                    xp: gamificationManager.profile.xp
                });
            } catch (error) {
                console.warn('âš ï¸ Gamification initialization failed:', error);
                // Non-critical, continue without gamification
            }
        });

        // Listen for quiz start to render mini-profile
        document.addEventListener('quizStarted', function() {
            if (gamificationUI && gamificationManager.profile.totalExercisesCompleted > 0) {
                // Only show mini-profile if user has completed at least one quiz
                gamificationUI.renderMiniProfile('gamification-mini-profile');
            }
        });
    </script>
</body>

</html>
