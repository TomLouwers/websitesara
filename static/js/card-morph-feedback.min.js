class CardMorphFeedback{constructor(){this.feedbackState=null,this.antiSkipTimer=null,this.canProceed=!1,this.originalCardHTML=null}morph({isCorrect:e,insight:n,confirmation:t,questionCard:i,nextButton:r,onProceed:a}){this.feedbackState=e?"correct":"incorrect",this.canProceed=e,this.originalCardHTML||(this.originalCardHTML=i.innerHTML),i.classList.add("card-flip-out"),setTimeout(()=>{this.renderFeedbackContent(i,{isCorrect:e,insight:n,confirmation:t}),i.classList.remove("card-flip-out"),i.classList.add("card-flip-in"),setTimeout(()=>{i.classList.remove("card-flip-in")},125)},125),this.setupNextButton(r,e,a)}renderFeedbackContent(e,{isCorrect:n,insight:t,confirmation:i}){const r=n?"feedback-correct":"feedback-incorrect",a=n?"âœ“":"ðŸ‘€",o=n?"Top gedaan!":"Let goed op wat er staat ðŸ‘‡",s=n?"#E8F5E9":"#FFF3E0";e.innerHTML=`\n      <div class="feedback-morph-container ${r}" style="background-color: ${s};">\n        \x3c!-- Header --\x3e\n        <div class="feedback-morph-header">\n          <span class="feedback-morph-emoji">${a}</span>\n          <h3 class="feedback-morph-title">${o}</h3>\n        </div>\n\n        \x3c!-- ONE Insight (Visual Center) --\x3e\n        <div class="feedback-morph-insight">\n          <p class="feedback-morph-insight-text">${t}</p>\n        </div>\n\n        \x3c!-- Confirmation --\x3e\n        <div class="feedback-morph-confirmation">\n          <p class="feedback-morph-confirmation-text">${i}</p>\n        </div>\n      </div>\n    `}setupNextButton(e,n,t){if(e)if(n)this.enableNextButton(e,t);else{this.disableNextButton(e);const n=document.createElement("p");n.className="feedback-anti-skip-helper",n.textContent="Lees dit evenâ€¦",n.style.cssText="\n        font-size: 0.875rem;\n        color: #666;\n        text-align: center;\n        margin-top: 0.5rem;\n        opacity: 1;\n        transition: opacity 0.3s ease;\n      ",e.parentNode.insertBefore(n,e.nextSibling),this.antiSkipTimer=setTimeout(()=>{this.canProceed=!0,n.style.opacity="0",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300),this.enableNextButton(e,t)},1500)}}disableNextButton(e){e.disabled=!0,e.style.opacity="0.4",e.style.cursor="not-allowed",e.style.transition="opacity 0.3s ease"}enableNextButton(e,n){e.disabled=!1,e.style.opacity="1",e.style.cursor="pointer",e.onclick=()=>{this.canProceed&&(this.reset(),n&&n())}}reset(e){this.antiSkipTimer&&(clearTimeout(this.antiSkipTimer),this.antiSkipTimer=null);document.querySelectorAll(".feedback-anti-skip-helper").forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.originalCardHTML&&e&&(e.innerHTML=this.originalCardHTML,e.classList.remove("card-flip-out","card-flip-in"),this.originalCardHTML=null),this.canProceed=!1,this.feedbackState=null}cancel(){this.reset()}}const CARD_MORPH_STYLES="\n/* Card flip animation */\n.card-flip-out {\n  animation: flipOut 125ms ease-in forwards;\n}\n\n.card-flip-in {\n  animation: flipIn 125ms ease-out forwards;\n}\n\n@keyframes flipOut {\n  from {\n    transform: rotateY(0deg);\n    opacity: 1;\n  }\n  to {\n    transform: rotateY(90deg);\n    opacity: 0;\n  }\n}\n\n@keyframes flipIn {\n  from {\n    transform: rotateY(-90deg);\n    opacity: 0;\n  }\n  to {\n    transform: rotateY(0deg);\n    opacity: 1;\n  }\n}\n\n/* Feedback morph container */\n.feedback-morph-container {\n  padding: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: background-color 0.3s ease;\n}\n\n.feedback-morph-container.feedback-correct {\n  border: 2px solid #81C784;\n}\n\n.feedback-morph-container.feedback-incorrect {\n  border: 2px solid #FFB74D;\n}\n\n/* Header */\n.feedback-morph-header {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n}\n\n.feedback-morph-emoji {\n  font-size: 2rem;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  background: white;\n  border-radius: 50%;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.feedback-morph-title {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #2c3e50;\n}\n\n/* ONE Insight (Visual Center) */\n.feedback-morph-insight {\n  margin: 2rem 0;\n  padding: 1.5rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\n  border-left: 4px solid #3498db;\n}\n\n.feedback-morph-insight-text {\n  margin: 0;\n  font-size: 1.125rem;\n  line-height: 1.6;\n  color: #2c3e50;\n  font-weight: 500;\n}\n\n/* Confirmation */\n.feedback-morph-confirmation {\n  margin-top: 1.5rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.7);\n  border-radius: 6px;\n}\n\n.feedback-morph-confirmation-text {\n  margin: 0;\n  font-size: 1rem;\n  line-height: 1.5;\n  color: #555;\n}\n\n/* Anti-skip helper text */\n.feedback-anti-skip-helper {\n  font-size: 0.875rem;\n  color: #666;\n  text-align: center;\n  margin-top: 0.5rem;\n  font-style: italic;\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  .feedback-morph-container {\n    padding: 1.5rem;\n  }\n\n  .feedback-morph-title {\n    font-size: 1.25rem;\n  }\n\n  .feedback-morph-insight-text {\n    font-size: 1rem;\n  }\n\n  .feedback-morph-emoji {\n    font-size: 1.5rem;\n    width: 2rem;\n    height: 2rem;\n  }\n}\n";"undefined"!=typeof module&&module.exports&&(module.exports={CardMorphFeedback:CardMorphFeedback,CARD_MORPH_STYLES:CARD_MORPH_STYLES});