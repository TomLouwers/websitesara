<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

    <!-- iOS/Safari specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="OefenPlatform">

    <!-- Android/Chrome specific meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#FF8A34">

    <!-- Prevent format detection -->
    <meta name="format-detection" content="telephone=no">

    <title>Quiz | OefenPlatform</title>
    <!-- Preconnect to Google Fonts for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/styles.min.css?v=20251228">
    <link rel="stylesheet" href="static/css/verhoudingstabel-widget.min.css?v=20251228">
    <link rel="stylesheet" href="static/css/rewards.css?v=20251228">
    <style>
        /* Quiz page specific styles */
        body {
            background-color: #FFFDF8;
            margin: 0;
            padding: 0;
        }

        .quiz-page-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ============================================
           QUIZ TOP BAR - NEW DESIGN
           ============================================ */

        .quiz-topbar-wrapper {
            width: 100%;
            max-width: 760px;
            margin: 0 auto 24px;
            background: white;
            border-radius: 16px;
            padding: 20px 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        /* 1. Top Row - Breadcrumbs + Control Buttons */
        .quiz-topbar-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .quiz-breadcrumb {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #9A9A9A;
            flex-wrap: wrap;
        }

        .quiz-breadcrumb a {
            color: #9A9A9A;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .quiz-breadcrumb a:hover {
            color: #32C4A0;
        }

        .quiz-breadcrumb-separator {
            color: #9A9A9A;
            margin: 0 2px;
        }

        /* 2. Progress Row (Text + Bar + Points) */
        .quiz-progress-section {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .quiz-progress-text {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .quiz-progress-track-wrapper {
            flex: 1;
            min-width: 0;
        }

        .quiz-progress-track {
            width: 100%;
            height: 8px;
            background: #E6F7F3;
            border-radius: 999px;
            overflow: hidden;
            position: relative;
        }

        .quiz-progress-fill {
            height: 100%;
            background: #32C4A0;
            border-radius: 999px;
            transition: width 0.4s ease;
        }

        /* Gamified Points Badge - Star Counter */
        .quiz-points-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #FFF4E6 0%, #FFE8D1 100%);
            color: #FF8A34;
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 15px;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(255, 138, 52, 0.15);
            border: 1.5px solid #FFD4A8;
        }

        .quiz-points-pill span:first-child {
            font-size: 18px;
            animation: twinkle 2s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.15); opacity: 0.85; }
        }

        /* 3. Control Buttons - Aligned with Breadcrumbs */
        .quiz-control-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            flex-shrink: 0;
        }

        .quiz-control-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            height: 32px;
            padding: 0 12px;
            border-radius: 999px;
            border: 1.5px solid;
            background: white;
            font-family: 'Nunito', sans-serif;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            opacity: 0.75;
        }

        .quiz-control-btn:hover {
            opacity: 1;
        }

        .quiz-control-btn.hulp {
            border-color: rgba(59, 130, 246, 0.25);
            color: #3B82F6;
        }

        .quiz-control-btn.hulp:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .quiz-control-btn.pauze {
            display: none; /* Hidden - too confusing for kids, they can restart instead */
        }

        /* Softer language for "Stop" button - now "Sluiten" (Close) */
        .quiz-control-btn.stoppen {
            display: none; /* Hidden - replaced by top-right X button */
        }

        /* Quiz container needs relative positioning for absolute child */
        .quiz-container {
            position: relative;
        }

        /* Top-right close button - app-style X */
        .quiz-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            border: 1.5px solid #E5E5E5;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 20px;
            color: #666;
            font-weight: 400;
            line-height: 1;
        }

        .quiz-close-btn:hover {
            background: #F5F5F5;
            border-color: #999;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .quiz-close-btn:active {
            transform: scale(0.95);
        }

        /* Responsive adjustments */
        @media (max-width: 900px) {
            .quiz-close-btn {
                top: 16px;
                right: 16px;
                width: 36px;
                height: 36px;
                font-size: 18px;
            }

            .quiz-topbar-wrapper {
                padding: 16px;
                margin-bottom: 16px;
            }

            .quiz-topbar-top {
                margin-bottom: 12px;
            }

            .quiz-breadcrumb {
                font-size: 12px;
            }

            .quiz-progress-section {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .quiz-progress-text {
                font-size: 14px;
                text-align: center;
            }

            .quiz-progress-track-wrapper {
                order: 2;
                width: 100%;
            }

            .quiz-points-pill {
                order: 3;
                font-size: 14px;
                padding: 6px 12px;
                align-self: center;
            }

            .quiz-control-buttons {
                justify-content: center;
            }

            .quiz-control-btn {
                height: 34px;
                padding: 0 14px;
                font-size: 0.8rem;
            }
        }

        /* Hide old elements */
        .quiz-progress-bar-container,
        .breadcrumb,
        .quiz-header-minimal {
            display: none !important;
        }

        /* ============================================
           QUIZ QUESTION CARD - NEW DESIGN
           ============================================ */

        .quiz-question-wrapper {
            width: 100%;
            max-width: 760px;
            margin: 0 auto 24px;
            background: white;
            border-radius: 20px;
            padding: 24px 28px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        /* Card Header - HIDDEN (info shown in breadcrumb only) */
        .quiz-card-header {
            display: none !important;
        }

        /* VISUAL ATTACHMENT: Question belongs to text, not answers */
        /* Story Block Wrapper - contains BOTH text and question */
        #storyBlockWrapper {
            margin-bottom: 16px; /* Gap after entire text+question block, before answers */
            overflow: visible;
            max-height: none;
            width: 100%;
        }

        /* Question in text container - inside the reading content */
        .question-in-text-container {
            margin-top: 20px; /* Breathing space from text */
            padding-top: 20px; /* Extra spacing */
            border-top: 1px solid rgba(163, 231, 223, 0.3); /* Subtle divider line, matches border color */
            width: 100%;
            overflow: visible;
        }

        /* For quizzes without story content, remove the top border and spacing */
        .no-story-content .question-in-text-container {
            margin-top: 0;
            padding-top: 0;
            border-top: none;
        }

        /* Hide the reading content container background/border for no-story quizzes */
        .no-story-content {
            background: transparent;
            border-left: none;
            padding: 0;
        }

        /* Question text styling - part of the reading flow */
        .question-in-text-container .question-text {
            font-size: 19px;
            font-weight: 700;
            color: #1E3A5F !important; /* Deep navy blue to distinguish from story text */
            line-height: 1.75; /* Match text line-height for visual unity */
            margin: 0;
            max-width: 100%; /* Full width for consistent alignment */
        }

        /* Empty quiz-question-box (kept for backward compatibility) */
        .quiz-question-box {
            display: none; /* Not used anymore, question is in text container */
        }

        #storyBlockWrapper.hidden {
            display: none;
        }

        /* Reading Content - unified with question, no heavy box */
        .quiz-question-wrapper .reading-content {
            position: relative;
            background: transparent;
            border-radius: 0;
            padding: 0 20px 20px 0;
            margin-bottom: 0;
            box-shadow: none;
            border-left: 4px solid #A3E7DF;
            padding-left: 20px;
            overflow: visible;
            max-height: none;
            width: 100%;
        }

        /* Story Header Label - subtle, not prominent */
        .story-header-label {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #32C4A0;
            text-transform: uppercase;
            letter-spacing: 0.6px;
            margin-bottom: 12px;
            opacity: 0.85;
        }

        /* Story Text Content - optimized for reading */
        .story-text-content {
            font-size: 16px;
            line-height: 1.75; /* Increased to 1.75 for better flow and readability */
            color: #333;
            max-width: 100%; /* Full width for consistent alignment */
            margin-bottom: 4px; /* Tight connection to question below */
            overflow: visible;
            max-height: none;
        }

        .story-text-content p {
            margin: 0 0 14px 0;
        }

        .story-text-content p:last-child {
            margin-bottom: 0;
        }

        /* Tablet breakpoint */
        @media (max-width: 768px) {
            .quiz-topbar-wrapper,
            .quiz-question-wrapper,
            .feedback-card {
                margin-left: 16px;
                margin-right: 16px;
            }

            .quiz-question-wrapper {
                padding: 20px 24px;
            }

            .feedback-card {
                padding: 20px 24px;
            }
        }

        /* Mobile breakpoint */
        @media (max-width: 640px) {
            .quiz-topbar-wrapper,
            .quiz-question-wrapper,
            .feedback-card {
                margin-left: 12px;
                margin-right: 12px;
                border-radius: 16px;
            }

            .quiz-topbar-wrapper {
                padding: 16px 20px;
            }

            .quiz-question-wrapper {
                padding: 20px 24px;
            }

            .feedback-card {
                padding: 20px 24px;
                margin-top: 20px;
                margin-bottom: 20px;
            }

            .quiz-subject-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .quiz-card-subject-title {
                font-size: 16px;
            }

            .quiz-card-subtitle {
                font-size: 12px;
            }

            /* Question in text container - mobile adjustments */
            .question-in-text-container {
                margin-top: 12px;
                padding-top: 12px;
            }

            #storyBlockWrapper {
                margin-bottom: 12px;
            }

            .question-in-text-container .question-text {
                font-size: 17px;
                font-weight: 700;
                line-height: 1.6;
            }

            .quiz-question-wrapper .reading-content {
                padding: 0 16px 16px 16px;
                border-left-width: 3px;
            }

            .quiz-answers-wrapper {
                margin-left: 0; /* Align with story border, not text */
                width: 100%;
            }

            .story-header-label {
                font-size: 11px;
                margin-bottom: 8px;
            }

            .story-text-content {
                font-size: 15px;
                line-height: 1.6;
            }

            /* Feedback component mobile styles */
            .feedback-headline {
                font-size: 18px;
            }

            .feedback-headline .emoji {
                font-size: 24px;
            }

            .feedback-answer-confirm {
                font-size: 14px;
                padding: 10px 14px;
            }

            .feedback-section-title {
                font-size: 15px;
            }

            .feedback-section-content {
                font-size: 14px;
            }

            /* üß† "Waarom?" Section mobile adjustments */
            #feedbackWhySection {
                padding: 16px 18px;
                margin: 16px 0;
            }

            #feedbackWhySection .feedback-section-title {
                font-size: 17px;
                margin: 0 0 12px 0;
            }

            #feedbackWhySection .feedback-section-title::before {
                font-size: 22px;
            }

            #feedbackWhySection .feedback-section-content {
                font-size: 15px;
            }

            .feedback-worked-example {
                font-size: 15px;
                padding: 14px 16px;
            }

            .feedback-tip {
                padding: 12px 14px;
            }

            .feedback-tip-title {
                font-size: 12px;
            }

            .feedback-tip-content {
                font-size: 12px;
            }
        }

        /* Hide old question card */
        .question-card {
            display: none !important;
        }

        /* ============================================
           ANSWER OPTION LIST - NEW DESIGN
           ============================================ */

        .quiz-answers-wrapper {
            margin-top: 0;
            margin-left: 0; /* Align with story border, not text */
            width: 100%;
        }

        /* SIMPLIFIED Answer Options - NO A/B/C/D labels, larger touch targets */
        .quiz-answers-wrapper .option {
            position: relative;
            display: flex;
            align-items: center;
            gap: 14px;
            background: #FAFAFA;
            border: 2.5px solid #E5E5E5;
            border-radius: 16px;
            padding: 20px 32px;
            min-height: 68px; /* Larger touch target for kids/tablets */
            margin-bottom: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 17px;
            font-weight: 500;
            color: #2C3E50;
        }

        .quiz-answers-wrapper .option:hover {
            background: #F0F0F0;
            border-color: #32C4A0;
            transform: translateY(-1px);
        }

        /* REMOVED: Letter Prefix Circle - NO A/B/C/D labels */
        .quiz-answers-wrapper .option::before {
            display: none !important;
            content: none !important;
        }

        /* Selected State */
        .quiz-answers-wrapper .option.selected {
            background: #FFF8F0;
            border-color: #FFB366;
            border-width: 3px;
            box-shadow: 0 4px 12px rgba(255, 179, 102, 0.15);
        }

        /* Neutral State (dimmed) */
        .quiz-answers-wrapper .option.is-neutral {
            opacity: 0.5;
            color: #7F8C8D;
        }

        /* Correct State - Clean, no A/B/C/D circle */
        .quiz-answers-wrapper .option.is-correct {
            background: linear-gradient(135deg, #E6F8E9 0%, #F0FDF4 100%);
            border-color: #37B24D;
            border-width: 3px;
            color: #2C3E50;
            font-weight: 600;
            animation: correctPulse 0.5s ease-out;
            box-shadow: 0 4px 12px rgba(55, 178, 77, 0.15);
        }

        .quiz-answers-wrapper .option.is-correct::after {
            content: '‚úì';
            position: absolute;
            right: 20px;
            font-size: 24px;
            color: #37B24D;
            font-weight: bold;
        }

        /* Incorrect State (neuroscience-safe) - Clean design */
        .quiz-answers-wrapper .option.is-incorrect {
            background: #FFF9E6;
            border-color: #FFC46B;
            border-width: 3px;
            color: #2C3E50;
            font-weight: 500;
            opacity: 0.7;
            cursor: not-allowed;
        }

        .quiz-answers-wrapper .option.is-incorrect::after {
            content: 'üí°';
            position: absolute;
            right: 20px;
            font-size: 20px;
        }

        /* Animations */
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Hide duplicate icons on right side (from old styles) */
        .quiz-answers-wrapper .option::after {
            display: none !important;
            content: none !important;
        }

        /* Responsive - Simplified for mobile/tablet */
        @media (max-width: 640px) {
            .quiz-answers-wrapper .option {
                padding: 18px 28px;
                min-height: 62px;
                font-size: 16px;
                border-radius: 14px;
            }

            .quiz-answers-wrapper .option.is-correct::after,
            .quiz-answers-wrapper .option.is-incorrect::after {
                right: 16px;
                font-size: 20px;
            }
        }

        /* ============================================
           INLINE CHECK BUTTON - Appears under selected answer
           ============================================ */

        .inline-check-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%; /* Full width to match options */
            max-width: 100%;
            min-height: 48px;
            padding: 12px 24px;
            margin-top: 0; /* No top margin - sits right below selected option */
            margin-bottom: 14px; /* Match option margin-bottom */
            background: linear-gradient(135deg, #FF8A34 0%, #FF6B35 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-family: 'Nunito', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(255, 138, 52, 0.25);
            animation: slideInUp 0.3s ease-out;
        }

        .inline-check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 138, 52, 0.35);
        }

        .inline-check-btn:active {
            transform: translateY(0);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile responsive for inline check button */
        @media (max-width: 640px) {
            .inline-check-btn {
                min-height: 44px;
                padding: 10px 20px;
                font-size: 15px;
            }
        }

        /* ============================================
           FEEDBACK COMPONENT - ENHANCED LEARNING
           ============================================ */

        .feedback-card {
            width: 100%;
            max-width: 760px;
            margin: 24px auto;
            background: white;
            border-radius: 20px;
            padding: 28px 32px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        .feedback-card.hidden {
            display: none;
        }

        /* Encouraging Headline */
        .feedback-headline {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 700;
            color: #2C3E50;
            margin: 0 0 16px 0;
        }

        .feedback-headline .emoji {
            font-size: 28px;
        }

        /* Correct feedback color */
        .feedback-card.correct .feedback-headline {
            color: #2D6A4F;
        }

        /* Incorrect feedback color (soft, no shame) */
        .feedback-card.incorrect .feedback-headline {
            color: #D97706;
        }

        /* Answer Confirmation */
        .feedback-answer-confirm {
            font-size: 15px;
            font-weight: 600;
            color: #5A6C7D;
            margin: 0 0 20px 0;
            padding: 12px 16px;
            background: #F8FAFC;
            border-radius: 12px;
            border-left: 4px solid #32C4A0;
        }

        .feedback-card.incorrect .feedback-answer-confirm {
            border-left-color: #FFA726;
        }

        /* Section Headers */
        .feedback-section {
            margin-bottom: 20px;
        }

        .feedback-section-title {
            font-size: 16px;
            font-weight: 700;
            color: #2C3E50;
            margin: 0 0 10px 0;
        }

        .feedback-section-content {
            font-size: 15px;
            line-height: 1.7;
            color: #2C3E50;
            margin: 0;
        }

        /* üß† "Waarom?" Section - PROMINENT LEERANKER */
        #feedbackWhySection {
            background: linear-gradient(135deg, #E8F4FD 0%, #F0F4FF 100%);
            border-radius: 16px;
            padding: 20px 24px;
            margin: 20px 0;
            border: 2px solid #7DD3FC;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.12);
        }

        #feedbackWhySection .feedback-section-title {
            font-size: 19px;
            font-weight: 800;
            color: #1E40AF;
            margin: 0 0 14px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #feedbackWhySection .feedback-section-title::before {
            content: 'üß†';
            font-size: 24px;
            line-height: 1;
        }

        #feedbackWhySection .feedback-section-content {
            font-size: 16px;
            line-height: 1.8;
            color: #1E3A8A;
            font-weight: 500;
        }

        /* "Zo werkt het" (worked example) */
        .feedback-worked-example {
            background: #F0F9FF;
            border-radius: 12px;
            padding: 16px 20px;
            margin: 12px 0;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: 600;
            color: #0369A1;
            text-align: center;
        }

        /* üí° Tip Box - Only for incorrect answers, more subtle */
        .feedback-tip {
            background: #FFFBF0;
            border-radius: 10px;
            padding: 14px 18px;
            margin-top: 16px;
            border-left: 3px solid #FCD34D;
            opacity: 0.92;
        }

        .feedback-tip-title {
            font-size: 13px;
            font-weight: 600;
            color: #B45309;
            margin: 0 0 6px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feedback-tip-content {
            font-size: 13px;
            line-height: 1.6;
            color: #78350F;
            margin: 0;
        }

        /* ============================================
           BEGRIJPEND LEZEN: Skill & Strategy Badges
           ============================================ */

        .question-meta-badges {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .skill-badge,
        .strategy-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 600;
        }

        .skill-badge {
            background: #FFF4E6;
            color: #D97706;
            border: 1.5px solid #FFC46B;
        }

        .strategy-badge {
            background: #F0F9FF;
            color: #0369A1;
            border: 1.5px solid #7DD3FC;
        }

        .badge-label {
            font-weight: 500;
            opacity: 0.8;
        }

        @media (max-width: 640px) {
            .question-meta-badges {
                gap: 8px;
                margin-bottom: 12px;
            }

            .skill-badge,
            .strategy-badge {
                font-size: 11px;
                padding: 5px 10px;
            }
        }

        /* ============================================
           HINT PILL BUTTON & DISPLAY
           ============================================ */

        /* Question wrapper - hide hint button from immediate view */
        .question-with-hint-wrapper {
            display: block;
            margin-bottom: 8px;
        }

        /* Question text takes full width */
        .question-with-hint-wrapper .question-text {
            width: 100%;
            color: #1E3A5F !important; /* Deep navy blue to distinguish from story text */
        }

        /* HINT BUTTON: Delayed affordance - only appears after 12s inactivity */
        .hint-pill-btn {
            /* Position at bottom of answer options, not next to question */
            display: none; /* Hidden by default - shown via JS after 12s */
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 32px;
            padding: 8px 14px;
            margin-top: 16px;

            /* Very subtle, de-emphasized styling */
            background: #FEFCE8;
            color: #92400E;
            border: 1px solid #FDE68A;
            border-radius: 8px;

            /* No shadow */
            box-shadow: none;

            /* Typography - small and subtle */
            font-size: 12px;
            font-weight: 500;
            font-family: 'Nunito', sans-serif;
            text-transform: none;
            letter-spacing: 0;

            /* Interaction */
            cursor: pointer;
            transition: all 0.15s ease;
            opacity: 0;

            /* No outline on focus, but add ring for accessibility */
            outline: none;
        }

        /* Show hint button with fade-in animation */
        .hint-pill-btn.show-hint {
            display: inline-flex;
            animation: hintFadeIn 0.4s ease-out forwards;
        }

        @keyframes hintFadeIn {
            from {
                opacity: 0;
                transform: translateY(-4px);
            }
            to {
                opacity: 0.7;
                transform: translateY(0);
            }
        }

        .hint-pill-btn:focus {
            box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.2);
            opacity: 1;
        }

        .hint-pill-btn:hover {
            background: #FEF9C3;
            border-color: #FDE68A;
            opacity: 0.95;
        }

        .hint-pill-btn:active {
            background: #FEF3C7;
        }

        /* Active state when hint is shown */
        .hint-pill-btn.active {
            background: #FEF3C7;
            border-color: #FDE68A;
            opacity: 1;
        }

        .hint-pill-icon {
            font-size: 13px;
            line-height: 1;
        }

        .hint-pill-text {
            line-height: 1;
        }

        .hint-display {
            margin-top: 12px;
            margin-bottom: 16px;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }

        .hint-display-content {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: #FFFBEB;
            border-left: 4px solid #F59E0B;
            border-radius: 10px;
            padding: 14px 18px;
        }

        .hint-display-icon {
            font-size: 22px;
            flex-shrink: 0;
            line-height: 1;
        }

        .hint-display-text {
            color: #78350F;
            line-height: 1.7;
            font-size: 15px;
            font-weight: 500;
        }

        /* Mobile optimizations */
        @media (max-width: 640px) {
            .question-with-hint-wrapper {
                gap: 8px;
            }

            .hint-pill-btn {
                /* Slightly larger for touch on mobile */
                min-height: 32px;
                padding: 7px 14px;
                font-size: 11px;
                gap: 4px;
            }

            .hint-pill-icon {
                font-size: 13px;
            }

            .hint-display-content {
                padding: 12px 14px;
                gap: 10px;
            }

            .hint-display-text {
                font-size: 14px;
            }
        }

        /* Tablet landscape */
        @media (min-width: 641px) and (max-width: 1024px) {
            .hint-pill-btn {
                min-height: 30px;
                padding: 6px 13px;
            }
        }

        /* Woordenschat Modal Styles */
        .woordenschat-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.8s ease-out;
        }

        .woordenschat-modal.hidden {
            display: none;
        }

        .woordenschat-modal.fade-out {
            opacity: 0;
        }

        .woordenschat-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
        }

        .woordenschat-modal-content {
            position: relative;
            background: white;
            border-radius: 24px;
            padding: 48px 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            animation: modalSlideIn 0.4s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .woordenschat-modal-icon {
            display: none; /* Hidden - focus on sentence */
        }

        @keyframes iconBounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .woordenschat-modal-title {
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            margin-bottom: 20px;
            letter-spacing: 0;
            text-transform: uppercase;
            font-size: 14px;
        }

        .woordenschat-modal-sentence {
            font-size: 26px;
            line-height: 1.6;
            color: #111827;
            font-weight: 600;
            margin: 0;
            padding: 32px 40px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 16px;
            border: 2px solid #86efac;
        }

        /* Mobile responsive */
        @media (max-width: 640px) {
            .woordenschat-modal-content {
                padding: 36px 24px;
                max-width: 95%;
            }

            .woordenschat-modal-title {
                font-size: 12px;
                margin-bottom: 16px;
            }

            .woordenschat-modal-sentence {
                font-size: 20px;
                padding: 24px 20px;
            }
        }

        /* ============================================
           CARD MORPH FEEDBACK STYLES
           ============================================ */

        /* Card flip animation */
        .card-flip-out {
            animation: flipOut 125ms ease-in forwards;
        }

        .card-flip-in {
            animation: flipIn 125ms ease-out forwards;
        }

        @keyframes flipOut {
            from {
                transform: rotateY(0deg);
                opacity: 1;
            }
            to {
                transform: rotateY(90deg);
                opacity: 0;
            }
        }

        @keyframes flipIn {
            from {
                transform: rotateY(-90deg);
                opacity: 0;
            }
            to {
                transform: rotateY(0deg);
                opacity: 1;
            }
        }

        /* Feedback morph container */
        .feedback-morph-container {
            padding: 2.5rem 2rem;
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .feedback-morph-container.feedback-correct {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%); /* Soft green, not neon */
            border: 2px solid #86EFAC; /* Thin green border */
        }

        .feedback-morph-container.feedback-incorrect {
            background: linear-gradient(135deg, #FFF7ED 0%, #FFEDD5 100%); /* Soft orange */
            border: 2px solid #FED7AA; /* Thin orange border */
        }

        /* Header - Ondersteunend, niet dominant */
        .feedback-morph-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .feedback-morph-emoji {
            font-size: 1.75rem;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.25rem;
            height: 2.25rem;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .feedback-morph-title {
            margin: 0;
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
        }

        .feedback-correct .feedback-morph-title {
            color: #166534; /* Dark green for correct */
        }

        .feedback-incorrect .feedback-morph-title {
            color: #92400E; /* Dark orange for incorrect */
        }

        /* ONE Insight (Visual Center - DOMINANT voor kinderen) */
        .feedback-morph-insight {
            margin: 2.5rem 0 2rem 0;
            padding: 0;
        }

        .feedback-morph-insight-text {
            margin: 0;
            font-size: 1.625rem;
            line-height: 1.5;
            color: #1a1a1a;
            font-weight: 700;
            text-align: center;
        }

        /* Confirmation - Secundair (rustiger, meer afstand) */
        .feedback-morph-confirmation {
            margin-top: 2.5rem;
            padding: 0;
        }

        .feedback-morph-confirmation-text {
            margin: 0;
            font-size: 0.9375rem;
            line-height: 1.6;
            color: #666;
            font-weight: 400;
            text-align: center;
        }

        /* Anti-skip helper text */
        .feedback-anti-skip-helper {
            font-size: 0.875rem;
            color: #666;
            text-align: center;
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Question card wrapper for morphing */
        .quiz-question-card-morph-wrapper {
            width: 100%;
            max-width: 760px;
            margin: 0 auto 24px;
            background: transparent;
            border-radius: 0;
            padding: 0;
            box-shadow: none;
            position: relative;
        }

        /* Responsive adjustments - Behoud visuele hi√´rarchie */
        @media (max-width: 768px) {
            .feedback-morph-container {
                padding: 1.5rem;
            }

            .feedback-morph-title {
                font-size: 1rem;
            }

            .feedback-morph-insight-text {
                font-size: 1.375rem;
                font-weight: 700;
            }

            .feedback-morph-confirmation-text {
                font-size: 0.875rem;
            }

            .feedback-morph-emoji {
                font-size: 1.5rem;
                width: 2rem;
                height: 2rem;
            }

            .quiz-question-card-morph-wrapper {
                padding: 0;
            }
        }

    </style>

    <!-- KaTeX for math notation rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Quiz Page Content -->
    <div id="quizPage" class="quiz-container">
        <!-- App-style close button (top-right X) -->
        <button class="quiz-close-btn" onclick="stopQuiz()" title="Sluiten">‚úï</button>

        <!-- New Quiz Top Bar -->
        <div class="quiz-topbar-wrapper">
            <!-- 1. Top Row: Breadcrumbs + Control Buttons -->
            <div class="quiz-topbar-top">
                <nav class="quiz-breadcrumb" id="quizBreadcrumb" aria-label="breadcrumb">
                    <a href="index.html">Home</a>
                    <span class="quiz-breadcrumb-separator">‚Ä∫</span>
                    <span id="breadcrumbSubjectNew">Onderwerp</span>
                    <span class="quiz-breadcrumb-separator" id="breadcrumbLevelSepNew" style="display:none;">‚Ä∫</span>
                    <span id="breadcrumbLevelNew" style="display:none;">Niveau</span>
                </nav>

                <div class="quiz-control-buttons">
                    <button class="quiz-control-btn hulp" id="lovaHelpButtonNew" onclick="toggleLovaPanel()" title="L.O.V.A. Stappenplan" style="display: none;">
                        <span>‚ùì</span>
                        <span>Hulp</span>
                    </button>
                    <button class="quiz-control-btn pauze" onclick="pauseQuiz()" title="Pauzeer">
                        <span>‚è∏</span>
                        <span>Pauze</span>
                    </button>
                    <button class="quiz-control-btn stoppen" onclick="stopQuiz()" title="Sluiten">
                        <span>‚úï</span>
                        <span>Sluiten</span>
                    </button>
                </div>
            </div>

            <!-- 2. Progress Row (Text + Bar + Points) -->
            <div class="quiz-progress-section">
                <span id="progressLabelNew" class="quiz-progress-text">Vraag 1 van 10</span>
                <div class="quiz-progress-track-wrapper">
                    <div class="quiz-progress-track">
                        <div id="progressBarFillNew" class="quiz-progress-fill" style="width: 10%"></div>
                    </div>
                </div>
                <div class="quiz-points-pill">
                    <span id="progressStar">‚≠ê</span>
                    <span><span id="totalCorrectNew">0</span> punten</span>
                </div>
            </div>

            <!-- Streak Bonus Floating Element (legacy, kept for backwards compatibility) -->
            <div id="streakBonus" class="streak-bonus hidden"></div>

            <!-- ==========================================
                 SESSION REWARD SYSTEM UI ELEMENTS
                 ========================================== -->

            <!-- Streak Milestone Card -->
            <div id="streakCard"></div>

            <!-- Point Burst Animation Container -->
            <div id="pointBurstContainer"></div>

            <!-- Shield Badge (grades 6-8) -->
            <div id="shieldBadge"></div>

            <!-- Multiplier Badge (grades 6-8) -->
            <div id="multiplierBadge"></div>

            <!-- Near-Miss Encouragement Card -->
            <div id="nearMissCard"></div>
        </div>

        <!-- Keep old elements hidden for backwards compatibility -->
        <div class="quiz-progress-bar-container" style="display:none;">
            <div class="quiz-progress-info">
                <span id="progressLabel" class="progress-label">Vraag 1 van 10</span>
                <span id="progressPercentage" class="progress-percentage">10% voltooid</span>
            </div>
            <div class="quiz-progress-bar">
                <div id="progressBarFill" class="quiz-progress-fill" style="width: 10%"></div>
            </div>
        </div>

        <nav class="breadcrumb" id="breadcrumb" aria-label="breadcrumb" style="display:none;">
            <a href="index.html">Home</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span id="breadcrumbSubject">Onderwerp</span>
            <span class="breadcrumb-separator" id="breadcrumbLevelSep" style="display:none;">‚Ä∫</span>
            <span id="breadcrumbLevel" style="display:none;">Niveau</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-current">Quiz</span>
        </nav>

        <div class="quiz-header-minimal" style="display:none;">
            <h2 id="quizTitle">Quiz</h2>
            <div class="quiz-header-controls">
                <button class="btn-icon" id="focusModeToggle" onclick="toggleFocusMode()" title="Focus Modus">
                    <i class="material-icons">visibility_off</i>
                </button>
                <button class="btn-icon" id="lovaHelpButton" onclick="toggleLovaPanel()" title="L.O.V.A. Stappenplan" style="display: none;">
                    <i class="material-icons">help_outline</i>
                </button>
                <button class="btn-icon" onclick="pauseQuiz()" title="Pauzeer">
                    <i class="material-icons">pause</i>
                </button>
                <button class="btn-icon" onclick="stopQuiz()" title="Stop">
                    <i class="material-icons">stop</i>
                </button>
            </div>
            <div class="quiz-progress-summary">
                <span class="progress-stat correct">‚úì <span id="totalCorrect">0</span> goed</span>
                <span class="progress-stat" style="color: var(--secondary-color);">üìã <span id="lovaClicks">0</span> hulp</span>
            </div>
        </div>

        <!-- Milestone Celebration -->
        <div id="milestoneCelebration" class="milestone-celebration hidden">
            <i class="material-icons celebration-icon">celebration</i>
            <span id="milestoneMessage">Goed bezig!</span>
        </div>

        <!-- New Question Card Wrapper -->
        <div class="quiz-question-wrapper">
            <!-- Card Header: Icon + Subject Title + Subtitle -->
            <div class="quiz-card-header">
                <div class="quiz-subject-icon" id="quizSubjectIcon">üî¢</div>
                <div class="quiz-card-title-group">
                    <h3 class="quiz-card-subject-title" id="quizCardSubjectTitle">Verhaaltjessommen</h3>
                    <p class="quiz-card-subtitle" id="quizCardSubtitle">Groep 8</p>
                </div>
            </div>

            <!-- Story Block (if available) - contains BOTH text AND question -->
            <div id="storyBlockWrapper" class="hidden">
                <div id="readingContentNew" class="reading-content">
                    <div class="story-header-label">
                        <span>üìò</span>
                        <span>Verhaaltje</span>
                    </div>
                    <div class="story-text-content"></div>

                    <!-- Question is INSIDE the same container as the text -->
                    <div class="question-in-text-container">
                        <!-- NEW: Skill and Strategy badges -->
                        <div class="question-meta-badges" id="questionMetaBadges" style="display: none;">
                            <span class="skill-badge" id="skillBadge" style="display: none;">
                                <span class="badge-label">Vaardigheid:</span>
                                <span id="skillType">Letterlijk</span>
                            </span>
                            <span class="strategy-badge" id="strategyBadge" style="display: none;">
                                <span class="badge-label">Strategie:</span>
                                <span id="strategyType">Informatie zoeken</span>
                            </span>
                        </div>

                        <!-- Question text -->
                        <div class="question-with-hint-wrapper">
                            <div class="question-text" id="questionTextNew"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Card Morph Wrapper -->
            <div id="questionCardMorph" class="quiz-question-card-morph-wrapper">
                <!-- Question Box -->
                <div class="quiz-question-box">
            </div>

            <!-- Hint Container -->
            <div id="hintContainerNew" style="text-align: center; margin: 20px 0;"></div>

            <!-- L.O.V.A. Help Panel -->
            <div id="lovaHelpPanelNew" class="lova-help-panel hidden">
                <div class="lova-help-content">
                    <!-- Stap 1: Lezen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">üìñ Stap 1: Lezen</h4>
                        <div class="lova-help-section">
                            <p><strong>Wat wordt er gevraagd?</strong></p>
                            <p id="lovaHelpHoofdvraagNew" class="lova-help-text"></p>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Let op: dit is ruis (niet nodig voor deze vraag):</strong></p>
                            <ul id="lovaHelpRuisNew" class="lova-help-list"></ul>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Tussenstappen:</strong></p>
                            <ul id="lovaHelpTussenstappenNew" class="lova-help-list"></ul>
                        </div>
                    </div>

                    <!-- Stap 2: Ordenen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">üóÉÔ∏è Stap 2: Ordenen</h4>
                        <div class="lova-help-section">
                            <p><strong>Relevante getallen:</strong></p>
                            <ul id="lovaHelpGetallenNew" class="lova-help-list"></ul>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Wiskundige tool:</strong></p>
                            <p id="lovaHelpToolNew" class="lova-help-text"></p>
                        </div>
                    </div>

                    <!-- Stap 3: Vormen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">‚úçÔ∏è Stap 3: Vormen</h4>
                        <div id="lovaHelpBewerkingenNew" class="lova-help-bewerkingen"></div>
                    </div>

                    <!-- Stap 4: Antwoorden -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">‚úÖ Stap 4: Antwoorden</h4>
                        <div class="lova-help-section">
                            <p><strong>Verwachte eenheid:</strong> <span id="lovaHelpEenheidNew" class="lova-help-text"></span></p>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Logica check:</strong></p>
                            <p id="lovaHelpLogicaNew" class="lova-help-text"></p>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Answer Options Container -->
                <div class="answers-section quiz-answers-wrapper">
                    <div id="optionsContainerNew" class="options-container"></div>
                    <textarea id="textareaAnswerNew" class="textarea-answer hidden" placeholder="Typ hier je antwoord..."></textarea>
                </div>

                <!-- HINT BUTTON: Delayed affordance - appears after 12s inactivity -->
                <div style="text-align: center; margin-top: 8px;">
                    <button class="hint-pill-btn" id="hintPillBtn" onclick="toggleHint()">
                        <span class="hint-pill-icon">üí°</span>
                        <span class="hint-pill-text">Ik wil een hint</span>
                    </button>
                </div>

                <!-- Hint display area - below hint button -->
                <div class="hint-display" id="hintDisplay" style="display: none;">
                    <div class="hint-display-content">
                        <span class="hint-display-icon">üí°</span>
                        <span class="hint-display-text" id="hintDisplayText"></span>
                    </div>
                </div>
            </div>
            <!-- End Question Card Morph Wrapper -->

            <!-- Feedback Section -->
            <div id="feedbackSectionNew" class="feedback-card hidden">
                <!-- Encouraging Headline -->
                <h3 class="feedback-headline">
                    <span class="emoji" id="feedbackEmojiNew">ü§ó</span>
                    <span id="feedbackHeadlineNew">Bijna! Probeer het nog een keer!</span>
                </h3>

                <!-- Answer Confirmation -->
                <p class="feedback-answer-confirm" id="feedbackAnswerConfirmNew"></p>

                <!-- "Waarom?" Section - PROMINENT LEERANKER -->
                <div class="feedback-section" id="feedbackWhySection">
                    <h4 class="feedback-section-title" id="feedbackWhySectionTitle">Waarom is dit goed?</h4>
                    <p class="feedback-section-content" id="feedbackWhyContentNew"></p>
                </div>

                <!-- "Zo werkt het:" Section (worked example) -->
                <div class="feedback-section" id="feedbackWorkedSection">
                    <h4 class="feedback-section-title">Zo werkt het:</h4>
                    <div class="feedback-worked-example" id="feedbackWorkedExampleNew"></div>
                </div>

                <!-- Tip for Next Time -->
                <div class="feedback-tip" id="feedbackTipSection">
                    <p class="feedback-tip-title">üí° Tip voor de volgende keer:</p>
                    <p class="feedback-tip-content" id="feedbackTipContentNew"></p>
                </div>

                <!-- Hidden elements for backward compatibility -->
                <div style="display: none;">
                    <div class="feedback-icon" id="feedbackIconNew"></div>
                    <h4 id="feedbackTitleNew"></h4>
                    <p id="feedbackMessageNew"></p>
                    <p id="correctAnswerDisplayNew" class="hidden"></p>
                    <div id="verhoudingstabelContainerNew"></div>
                    <p id="extraInfoDisplayNew" class="hidden"></p>
                    <div id="strategyAndTipsNew" class="hidden">
                        <h4>Strategie</h4>
                        <p id="strategyTextNew"></p>
                        <h4>Tips</h4>
                        <ul id="tipsListNew"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Old Question Card Container (hidden) -->
        <div class="question-card">
            <div class="question-container">
                <div id="readingContent" class="reading-content hidden"></div>
                <div class="question-text" id="questionText"></div>

                <!-- Hint Container -->
                <div id="hintContainer" style="text-align: center; margin: 20px 0;"></div>

                <!-- L.O.V.A. Help Panel -->
                <div id="lovaHelpPanel" class="lova-help-panel hidden">
                    <div class="lova-help-content">
                        <!-- Stap 1: Lezen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">üìñ Stap 1: Lezen</h4>
                            <div class="lova-help-section">
                                <p><strong>Wat wordt er gevraagd?</strong></p>
                                <p id="lovaHelpHoofdvraag" class="lova-help-text"></p>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Let op: dit is ruis (niet nodig voor deze vraag):</strong></p>
                                <ul id="lovaHelpRuis" class="lova-help-list"></ul>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Tussenstappen:</strong></p>
                                <ul id="lovaHelpTussenstappen" class="lova-help-list"></ul>
                            </div>
                        </div>

                        <!-- Stap 2: Ordenen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">üóÉÔ∏è Stap 2: Ordenen</h4>
                            <div class="lova-help-section">
                                <p><strong>Relevante getallen:</strong></p>
                                <ul id="lovaHelpGetallen" class="lova-help-list"></ul>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Wiskundige tool:</strong></p>
                                <p id="lovaHelpTool" class="lova-help-text"></p>
                            </div>
                        </div>

                        <!-- Stap 3: Vormen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">‚úçÔ∏è Stap 3: Vormen</h4>
                            <div id="lovaHelpBewerkingen" class="lova-help-bewerkingen"></div>
                        </div>

                        <!-- Stap 4: Antwoorden -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">‚úÖ Stap 4: Antwoorden</h4>
                            <div class="lova-help-section">
                                <p><strong>Verwachte eenheid:</strong> <span id="lovaHelpEenheid" class="lova-help-text"></span></p>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Logica check:</strong></p>
                                <p id="lovaHelpLogica" class="lova-help-text"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Answer Options Container -->
            <div class="answers-section">
                <div id="optionsContainer" class="options-container"></div>
                <textarea id="textareaAnswer" class="textarea-answer hidden" placeholder="Typ hier je antwoord..."></textarea>
            </div>

            <!-- Feedback Section -->
            <div id="feedbackSection" class="feedback-card hidden">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <h4 id="feedbackTitle"></h4>
                <p id="feedbackMessage"></p>
                <p id="correctAnswerDisplay" class="hidden"></p>
                <div id="verhoudingstabelContainer"></div>
                <p id="extraInfoDisplay" class="hidden"></p>
                <div id="strategyAndTips" class="hidden">
                    <h4>Strategie</h4>
                    <p id="strategyText"></p>
                    <h4>Tips</h4>
                    <ul id="tipsList"></ul>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="quiz-actions">
            <button class="btn btn-primary-action" id="submitBtn" onclick="submitAnswer()">
                <i class="material-icons">check_circle</i> Check mijn antwoord!
            </button>
            <button class="btn btn-primary-action hidden" id="nextBtn" onclick="nextQuestion()">
                Volgende! <i class="material-icons">arrow_forward</i>
            </button>
        </div>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="results-container" style="display: none;">
        <!-- 1. Hero Block: Emotional Summary -->
        <div class="result-hero">
            <div class="result-emoji" id="resultEmoji">üéâ</div>
            <h1 class="result-headline" id="resultHeadline">Knap gewerkt!</h1>
            <p class="result-summary" id="resultSummary">Je hebt 8 vragen goed beantwoord!</p>
            <div class="result-growth-badge" id="resultGrowthBadge">
                <span class="growth-icon">‚≠ê</span>
                <span id="growthText">Je hebt 2 leerpunten verdiend!</span>
            </div>
        </div>

        <!-- 2. Skills Overview: Progress Chips -->
        <div class="skills-overview" id="skillsOverview">
            <h2 class="section-heading">üìä Wat heb je geoefend?</h2>
            <div class="skills-chips" id="skillsChips">
                <!-- Skills chips will be inserted here dynamically -->
            </div>
        </div>

        <!-- 3. Sticker Collection: Session-based rewards -->
        <div id="stickerCollection" style="display: none;">
            <!-- Stickers will be dynamically inserted here -->
        </div>

        <!-- 4. Question Cards: Collapsible Accordion -->
        <div class="question-review-section" id="questionReviewSection">
            <h2 class="section-heading">üí° Jouw groeikansen</h2>
            <p class="section-description">Klik op een vraag om de uitleg te zien</p>
            <div class="question-accordion" id="questionAccordion">
                <!-- Accordion items will be inserted here dynamically -->
            </div>
        </div>

        <!-- 4. Primary CTA -->
        <div class="result-actions">
            <button class="btn-result-primary" onclick="restartQuiz()">
                <span class="btn-icon">üîÅ</span>
                <span>Nog een keer oefenen!</span>
            </button>

            <!-- 5. Secondary CTA -->
            <button class="btn-result-secondary" onclick="goToLanding()">
                <i class="material-icons">arrow_back</i>
                <span>Terug naar overzicht</span>
            </button>
        </div>
    </div>

    <!-- Review Page -->
    <div id="reviewPage" class="results-container" style="display: none;">
        <h2 style="color: var(--primary-color); margin-bottom: 20px;">üìö Leer van je fouten ‚Äî zo word je beter!</h2>
        <div class="results-score" id="reviewScore">0/0</div>
        <div class="results-message" id="reviewMessage">Kijk goed naar deze vragen ‚Äî elke fout maakt je slimmer! üí™</div>

        <div id="wrongAnswersContainer" style="margin-top: 30px;">
            <!-- Wrong answers will be dynamically inserted here -->
        </div>

        <button class="btn" onclick="goToLanding()" style="margin-top: 30px;">
            <i class="material-icons">refresh</i> Nog een keer oefenen!
        </button>
    </div>

    <!-- Foutanalyse Modaal -->
    <div id="foutanalyseModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2 id="modaalTitle">üí° Bijna! Je komt er wel! üëÄ‚ú®</h2>
                <button class="modaal-close" onclick="closeFoutanalyseModaal()">‚úï</button>
            </div>

            <div id="errorBadge" class="error-badge"></div>

            <div class="fault-analysis-section">
                <h3>Laten we samen kijken! üí°</h3>
                <p id="mainExplanation" class="main-explanation"></p>

                <div id="reflectionBox" class="reflection-box" style="display: none;">
                    <div class="reflection-header">
                        <span class="reflection-icon">ü§î</span>
                        <strong>REFLECTIEVRAAG:</strong>
                    </div>
                    <p id="reflectionText" class="reflection-text"></p>
                </div>
            </div>

            <div id="visualAidSection" class="visual-aid-section" style="display: none;">
                <h4>
                    <span class="visual-icon">üìä</span>
                    <span id="visualAidTitle"></span>
                </h4>
                <div id="visualAidContent" class="visual-content"></div>
                <button id="videoButton" class="video-button" style="display: none;">
                    ‚ñ∂Ô∏è Bekijk Uitleg: <span id="videoTitle"></span>
                </button>
            </div>

            <div id="remedialSection" class="remedial-section" style="display: none;">
                <div class="remedial-alert">
                    üí™ Extra oefening maakt je sterker!
                </div>
                <p id="remedialExplanation" class="remedial-explanation"></p>
                <button id="remedialCta" class="remedial-cta">
                    <span class="cta-icon">üéØ</span>
                    <span id="remedialCtaText" class="cta-text"></span>
                </button>
                <div class="exercise-info">
                    <span class="info-icon">‚ÑπÔ∏è</span>
                    <span>5 eenvoudige oefenopgaven</span>
                </div>
            </div>

            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="closeFoutanalyseModaal()">
                    Probeer Opnieuw
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modaal -->
    <div id="successModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2>‚úÖ Goed gedaan! Hier is de uitleg</h2>
                <button class="modaal-close" onclick="closeSuccessModaal()">‚úï</button>
            </div>

            <div class="lova-accordion">
                <button class="accordion-toggle" onclick="toggleLovaAccordion()">
                    <span id="lovaToggleIcon">‚ñº</span>
                    üìö L.O.V.A. Stappenplan (klik om uit te klappen)
                </button>
                <div id="lovaContent" class="accordion-content">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <div class="berekening-section">
                <h3>üßÆ Berekening Stap voor Stap</h3>
                <div id="berekeningTable"></div>
            </div>

            <div class="concept-box">
                <h3>üí° Dit moet je weten</h3>
                <p id="conceptText"></p>
            </div>

            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="nextQuestion()">
                    Volgende Vraag
                </button>
            </div>
        </div>
    </div>

    <!-- Accessibility Panel -->
    <div class="accessibility-panel" id="accessibilityPanel">
        <h3>‚ôø Toegankelijkheidsopties</h3>

        <div class="accessibility-option">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="option-icon">üî†</span>
                <span style="font-weight: 600;">Lettergrootte</span>
            </div>
            <div class="font-size-group">
                <button class="font-size-btn active" data-size="standard">Standaard</button>
                <button class="font-size-btn" data-size="groot">Groot</button>
                <button class="font-size-btn" data-size="extra-groot">Extra Groot</button>
            </div>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="dyslexiaMode">
                <span class="option-icon">üß†</span>
                <span>Dyslexie-modus (Lexend)</span>
            </label>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="focusMode">
                <span class="option-icon">üéØ</span>
                <span>Focus-modus (minimale afleiding)</span>
            </label>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="highContrastMode">
                <span class="option-icon">üé®</span>
                <span>Hoog contrast</span>
            </label>
        </div>
    </div>

    <!-- Scripts -->
    <script src="static/js/config.min.js?v=20251228" defer></script>
    <script src="static/js/utils.min.js?v=20251228" defer></script>
    <script src="static/js/verhoudingstabel-widget.min.js?v=20251228" defer></script>
    <script src="static/js/foutanalyse-modaal.min.js?v=20251228" defer></script>
    <script src="static/js/insight-generator.min.js?v=20251228" defer></script>
    <script src="static/js/card-morph-feedback.min.js?v=20251228" defer></script>
    <!-- Session-based reward system -->
    <script src="static/js/session-rewards.min.js?v=20251228" defer></script>
    <script src="static/js/streak-animations.min.js?v=20251228" defer></script>
    <script src="static/js/app.min.js?v=20251228" defer></script>
    <script src="static/js/accessibility.min.js?v=20251228" defer></script>

    <script>
        // On page load, check if we have quiz data in sessionStorage
        document.addEventListener('DOMContentLoaded', function() {
            const quizState = sessionStorage.getItem('quizState');

            if (!quizState) {
                // No quiz state found, redirect to home
                alert('Geen quiz data gevonden. Je wordt teruggestuurd naar de homepagina.');
                window.location.href = 'index.html';
                return;
            }

            // Quiz state exists, let app.js handle loading it
            // The quiz should already start automatically via the modified app.js
        });

        // Override goToLanding to redirect to index.html
        function goToLanding() {
            window.location.href = 'index.html';
        }
    </script>

    <!-- Woordenschat Example Sentence Modal -->
    <div id="woordenschatModal" class="woordenschat-modal hidden">
        <div class="woordenschat-modal-overlay"></div>
        <div class="woordenschat-modal-content">
            <div class="woordenschat-modal-icon">üìñ</div>
            <h3 class="woordenschat-modal-title">Zo gebruik je het woord:</h3>
            <p class="woordenschat-modal-sentence" id="woordenschatModalSentence"></p>
        </div>
    </div>

</body>
</html>
