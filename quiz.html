<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz | OefenPlatform</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="verhoudingstabel-widget.css">
    <style>
        /* Quiz page specific styles */
        body {
            background-color: #FFFDF8;
            margin: 0;
            padding: 0;
        }

        .quiz-page-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ============================================
           QUIZ TOP BAR - NEW DESIGN
           ============================================ */

        .quiz-topbar-wrapper {
            width: 100%;
            max-width: 640px;
            margin: 0 auto 24px;
            background: white;
            border-radius: 16px;
            padding: 20px 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        /* 1. Breadcrumbs - very subtle */
        .quiz-breadcrumb {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #9A9A9A;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .quiz-breadcrumb a {
            color: #9A9A9A;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .quiz-breadcrumb a:hover {
            color: #32C4A0;
        }

        .quiz-breadcrumb-separator {
            color: #9A9A9A;
            margin: 0 2px;
        }

        /* 2. Progress Row (Text + Bar + Points) */
        .quiz-progress-section {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .quiz-progress-text {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .quiz-progress-track-wrapper {
            flex: 1;
            min-width: 0;
        }

        .quiz-progress-track {
            width: 100%;
            height: 8px;
            background: #E6F7F3;
            border-radius: 999px;
            overflow: hidden;
            position: relative;
        }

        .quiz-progress-fill {
            height: 100%;
            background: #32C4A0;
            border-radius: 999px;
            transition: width 0.4s ease;
        }

        .quiz-points-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #FFE8D1;
            color: #FF8A34;
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 15px;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
        }

        /* 3. Control Buttons Row (below progress) */
        .quiz-topbar-bottom {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* 4. Control Buttons */
        .quiz-control-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .quiz-control-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            height: 36px;
            padding: 0 16px;
            border-radius: 999px;
            border: 1.5px solid;
            background: white;
            font-family: 'Nunito', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quiz-control-btn.hulp {
            border-color: rgba(59, 130, 246, 0.25);
            color: #3B82F6;
        }

        .quiz-control-btn.hulp:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .quiz-control-btn.pauze {
            border-color: #CFCFCF;
            color: #666;
        }

        .quiz-control-btn.pauze:hover {
            background: rgba(0, 0, 0, 0.03);
        }

        .quiz-control-btn.stoppen {
            border-color: rgba(249, 115, 115, 0.4);
            color: #F97373;
        }

        .quiz-control-btn.stoppen:hover {
            background: rgba(249, 115, 115, 0.05);
        }

        /* Responsive adjustments */
        @media (max-width: 900px) {
            .quiz-topbar-wrapper {
                padding: 16px;
                margin-bottom: 16px;
            }

            .quiz-breadcrumb {
                font-size: 12px;
                margin-bottom: 12px;
            }

            .quiz-progress-section {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .quiz-progress-text {
                font-size: 14px;
                text-align: center;
            }

            .quiz-progress-track-wrapper {
                order: 2;
                width: 100%;
            }

            .quiz-points-pill {
                order: 3;
                font-size: 14px;
                padding: 6px 12px;
                align-self: center;
            }

            .quiz-topbar-bottom {
                justify-content: center;
            }

            .quiz-control-btn {
                height: 34px;
                padding: 0 14px;
                font-size: 0.8rem;
            }
        }

        /* Hide old elements */
        .quiz-progress-bar-container,
        .breadcrumb,
        .quiz-header-minimal {
            display: none !important;
        }

        /* ============================================
           QUIZ QUESTION CARD - NEW DESIGN
           ============================================ */

        .quiz-question-wrapper {
            width: 100%;
            max-width: 640px;
            margin: 0 auto 24px;
            background: white;
            border-radius: 20px;
            padding: 28px 32px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        /* Card Header - HIDDEN (info shown in breadcrumb only) */
        .quiz-card-header {
            display: none !important;
        }

        /* Question Box - Step 2: Clear and prominent */
        .quiz-question-box {
            background: white;
            border-radius: 16px;
            padding: 26px 30px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
            border: 2px solid #E8E8E8;
        }

        .quiz-question-box .question-text {
            font-size: 20px;
            font-weight: 700;
            color: #1A2332;
            line-height: 1.6;
            margin: 0;
        }

        /* Story Block Wrapper */
        #storyBlockWrapper {
            margin-bottom: 20px;
        }

        #storyBlockWrapper.hidden {
            display: none;
        }

        /* Reading Content Box - Supportive context container */
        .quiz-question-wrapper .reading-content {
            position: relative;
            background: #FFF8EC;
            border-radius: 16px;
            padding: 18px 22px 18px 26px;
            margin-bottom: 0;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
            border-left: 3px solid #A3E7DF;
        }

        /* Story Header Label - Inside the box */
        .story-header-label {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #7BA3E5;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }

        /* Story Text Content */
        .story-text-content {
            font-size: 15px;
            line-height: 1.5;
            color: #555;
        }

        .story-text-content p {
            margin: 0 0 12px 0;
        }

        .story-text-content p:last-child {
            margin-bottom: 0;
        }

        /* Tablet breakpoint */
        @media (max-width: 768px) {
            .quiz-topbar-wrapper,
            .quiz-question-wrapper,
            .feedback-card {
                margin-left: 16px;
                margin-right: 16px;
            }

            .quiz-question-wrapper {
                padding: 24px 28px;
            }

            .feedback-card {
                padding: 24px 28px;
            }
        }

        /* Mobile breakpoint */
        @media (max-width: 640px) {
            .quiz-topbar-wrapper,
            .quiz-question-wrapper,
            .feedback-card {
                margin-left: 12px;
                margin-right: 12px;
                border-radius: 16px;
            }

            .quiz-topbar-wrapper {
                padding: 16px 20px;
            }

            .quiz-question-wrapper {
                padding: 20px 24px;
            }

            .feedback-card {
                padding: 20px 24px;
                margin-top: 20px;
                margin-bottom: 20px;
            }

            .quiz-subject-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .quiz-card-subject-title {
                font-size: 16px;
            }

            .quiz-card-subtitle {
                font-size: 12px;
            }

            .quiz-question-box {
                padding: 20px 24px;
            }

            .quiz-question-box .question-text {
                font-size: 18px;
                font-weight: 700;
            }

            .quiz-question-wrapper .reading-content {
                padding: 16px 18px 16px 22px;
                border-left-width: 3px;
            }

            .story-header-label {
                font-size: 11px;
                margin-bottom: 8px;
            }

            .story-text-content {
                font-size: 14px;
            }

            /* Feedback component mobile styles */
            .feedback-headline {
                font-size: 18px;
            }

            .feedback-headline .emoji {
                font-size: 24px;
            }

            .feedback-answer-confirm {
                font-size: 14px;
                padding: 10px 14px;
            }

            .feedback-section-title {
                font-size: 15px;
            }

            .feedback-section-content {
                font-size: 14px;
            }

            .feedback-worked-example {
                font-size: 15px;
                padding: 14px 16px;
            }

            .feedback-tip {
                padding: 14px 16px;
            }

            .feedback-tip-title {
                font-size: 13px;
            }

            .feedback-tip-content {
                font-size: 13px;
            }
        }

        /* Hide old question card */
        .question-card {
            display: none !important;
        }

        /* ============================================
           ANSWER OPTION LIST - NEW DESIGN
           ============================================ */

        .quiz-answers-wrapper {
            margin-top: 16px;
        }

        /* Base Answer Option Style */
        .quiz-answers-wrapper .option {
            position: relative;
            display: flex;
            align-items: center;
            gap: 14px;
            background: white;
            border: 2px solid #D9D9D9;
            border-radius: 999px;
            padding: 16px 20px 16px 70px;
            min-height: 58px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            font-weight: 500;
            color: #2C3E50;
        }

        .quiz-answers-wrapper .option:hover {
            background: #F9FAFB;
        }

        /* Letter Prefix Circle */
        .quiz-answers-wrapper .option::before {
            content: attr(data-letter);
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #F5F5F5;
            border: 2px solid #D9D9D9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 700;
            color: #666;
            transition: all 0.2s ease;
        }

        /* Selected State */
        .quiz-answers-wrapper .option.selected {
            background: #FFF8F0;
            border-color: #FFB366;
        }

        .quiz-answers-wrapper .option.selected::before {
            background: #FFE8D1;
            border-color: #FFB366;
            color: #FF8A34;
        }

        /* Neutral State (dimmed) */
        .quiz-answers-wrapper .option.is-neutral {
            opacity: 0.6;
            color: #7F8C8D;
        }

        /* Correct State */
        .quiz-answers-wrapper .option.is-correct {
            background: #E6F8E9;
            border-color: #37B24D;
            color: #2C3E50;
            font-weight: 600;
            animation: correctPulse 0.5s ease-out;
        }

        .quiz-answers-wrapper .option.is-correct::before {
            content: '‚úì';
            background: #E6F8E9;
            border-color: #37B24D;
            color: #37B24D;
            font-size: 18px;
        }

        /* Incorrect State (neuroscience-safe) */
        .quiz-answers-wrapper .option.is-incorrect {
            background: #FFF4D7;
            border-color: #FFC46B;
            color: #2C3E50;
            font-weight: 600;
            opacity: 0.7;
            cursor: not-allowed;
        }

        .quiz-answers-wrapper .option.is-incorrect::before {
            content: 'üí°';
            background: #FFF4D7;
            border-color: #FFC46B;
            font-size: 18px;
        }

        /* Animations */
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Hide duplicate icons on right side (from old styles) */
        .quiz-answers-wrapper .option::after {
            display: none !important;
            content: none !important;
        }

        /* Responsive */
        @media (max-width: 640px) {
            .quiz-answers-wrapper .option {
                padding: 14px 16px 14px 60px;
                min-height: 54px;
                font-size: 15px;
            }

            .quiz-answers-wrapper .option::before {
                left: 12px;
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            .quiz-answers-wrapper .option.is-incorrect::before,
            .quiz-answers-wrapper .option.is-correct::before {
                font-size: 16px;
            }
        }

        /* ============================================
           FEEDBACK COMPONENT - ENHANCED LEARNING
           ============================================ */

        .feedback-card {
            width: 100%;
            max-width: 640px;
            margin: 24px auto;
            background: white;
            border-radius: 20px;
            padding: 28px 32px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        .feedback-card.hidden {
            display: none;
        }

        /* Encouraging Headline */
        .feedback-headline {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 700;
            color: #2C3E50;
            margin: 0 0 16px 0;
        }

        .feedback-headline .emoji {
            font-size: 28px;
        }

        /* Correct feedback color */
        .feedback-card.correct .feedback-headline {
            color: #2D6A4F;
        }

        /* Incorrect feedback color (soft, no shame) */
        .feedback-card.incorrect .feedback-headline {
            color: #D97706;
        }

        /* Answer Confirmation */
        .feedback-answer-confirm {
            font-size: 15px;
            font-weight: 600;
            color: #5A6C7D;
            margin: 0 0 20px 0;
            padding: 12px 16px;
            background: #F8FAFC;
            border-radius: 12px;
            border-left: 4px solid #32C4A0;
        }

        .feedback-card.incorrect .feedback-answer-confirm {
            border-left-color: #FFA726;
        }

        /* Section Headers */
        .feedback-section {
            margin-bottom: 20px;
        }

        .feedback-section-title {
            font-size: 16px;
            font-weight: 700;
            color: #2C3E50;
            margin: 0 0 10px 0;
        }

        .feedback-section-content {
            font-size: 15px;
            line-height: 1.7;
            color: #2C3E50;
            margin: 0;
        }

        /* "Zo werkt het" (worked example) */
        .feedback-worked-example {
            background: #F0F9FF;
            border-radius: 12px;
            padding: 16px 20px;
            margin: 12px 0;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: 600;
            color: #0369A1;
            text-align: center;
        }

        /* Tip Box */
        .feedback-tip {
            background: #FFF4E6;
            border-radius: 12px;
            padding: 16px 20px;
            margin-top: 16px;
            border-left: 4px solid #FFB84D;
        }

        .feedback-tip-title {
            font-size: 14px;
            font-weight: 700;
            color: #D97706;
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feedback-tip-content {
            font-size: 14px;
            line-height: 1.6;
            color: #92400E;
            margin: 0;
        }

    </style>
</head>
<body>
    <!-- Quiz Page Content -->
    <div id="quizPage" class="quiz-container">
        <!-- New Quiz Top Bar -->
        <div class="quiz-topbar-wrapper">
            <!-- 1. Breadcrumbs (very subtle) -->
            <nav class="quiz-breadcrumb" id="quizBreadcrumb" aria-label="breadcrumb">
                <a href="index.html">Home</a>
                <span class="quiz-breadcrumb-separator">‚Ä∫</span>
                <span id="breadcrumbSubjectNew">Onderwerp</span>
                <span class="quiz-breadcrumb-separator" id="breadcrumbLevelSepNew" style="display:none;">‚Ä∫</span>
                <span id="breadcrumbLevelNew" style="display:none;">Niveau</span>
            </nav>

            <!-- 2. Progress Row (Text + Bar + Points) -->
            <div class="quiz-progress-section">
                <span id="progressLabelNew" class="quiz-progress-text">Vraag 1 van 10</span>
                <div class="quiz-progress-track-wrapper">
                    <div class="quiz-progress-track">
                        <div id="progressBarFillNew" class="quiz-progress-fill" style="width: 10%"></div>
                    </div>
                </div>
                <div class="quiz-points-pill">
                    <span>üèÖ</span>
                    <span><span id="totalCorrectNew">0</span> punten</span>
                </div>
            </div>

            <!-- 3. Control Buttons Row -->
            <div class="quiz-topbar-bottom">
                <div class="quiz-control-buttons">
                    <button class="quiz-control-btn hulp" id="lovaHelpButtonNew" onclick="toggleLovaPanel()" title="L.O.V.A. Stappenplan" style="display: none;">
                        <span>‚ùì</span>
                        <span>Hulp</span>
                    </button>
                    <button class="quiz-control-btn pauze" onclick="pauseQuiz()" title="Pauzeer">
                        <span>‚è∏Ô∏è</span>
                        <span>Pauze</span>
                    </button>
                    <button class="quiz-control-btn stoppen" onclick="stopQuiz()" title="Stop">
                        <span>‚èπÔ∏è</span>
                        <span>Stoppen</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Keep old elements hidden for backwards compatibility -->
        <div class="quiz-progress-bar-container" style="display:none;">
            <div class="quiz-progress-info">
                <span id="progressLabel" class="progress-label">Vraag 1 van 10</span>
                <span id="progressPercentage" class="progress-percentage">10% voltooid</span>
            </div>
            <div class="quiz-progress-bar">
                <div id="progressBarFill" class="quiz-progress-fill" style="width: 10%"></div>
            </div>
        </div>

        <nav class="breadcrumb" id="breadcrumb" aria-label="breadcrumb" style="display:none;">
            <a href="index.html">Home</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span id="breadcrumbSubject">Onderwerp</span>
            <span class="breadcrumb-separator" id="breadcrumbLevelSep" style="display:none;">‚Ä∫</span>
            <span id="breadcrumbLevel" style="display:none;">Niveau</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-current">Quiz</span>
        </nav>

        <div class="quiz-header-minimal" style="display:none;">
            <h2 id="quizTitle">Quiz</h2>
            <div class="quiz-header-controls">
                <button class="btn-icon" id="focusModeToggle" onclick="toggleFocusMode()" title="Focus Modus">
                    <i class="material-icons">visibility_off</i>
                </button>
                <button class="btn-icon" id="lovaHelpButton" onclick="toggleLovaPanel()" title="L.O.V.A. Stappenplan" style="display: none;">
                    <i class="material-icons">help_outline</i>
                </button>
                <button class="btn-icon" onclick="pauseQuiz()" title="Pauzeer">
                    <i class="material-icons">pause</i>
                </button>
                <button class="btn-icon" onclick="stopQuiz()" title="Stop">
                    <i class="material-icons">stop</i>
                </button>
            </div>
            <div class="quiz-progress-summary">
                <span class="progress-stat correct">‚úì <span id="totalCorrect">0</span> goed</span>
                <span class="progress-stat" style="color: var(--secondary-color);">üìã <span id="lovaClicks">0</span> hulp</span>
            </div>
        </div>

        <!-- Milestone Celebration -->
        <div id="milestoneCelebration" class="milestone-celebration hidden">
            <i class="material-icons celebration-icon">celebration</i>
            <span id="milestoneMessage">Goed bezig!</span>
        </div>

        <!-- New Question Card Wrapper -->
        <div class="quiz-question-wrapper">
            <!-- Card Header: Icon + Subject Title + Subtitle -->
            <div class="quiz-card-header">
                <div class="quiz-subject-icon" id="quizSubjectIcon">üî¢</div>
                <div class="quiz-card-title-group">
                    <h3 class="quiz-card-subject-title" id="quizCardSubjectTitle">Verhaaltjessommen</h3>
                    <p class="quiz-card-subtitle" id="quizCardSubtitle">Groep 8</p>
                </div>
            </div>

            <!-- Story Block (if available) - shown first -->
            <div id="storyBlockWrapper" class="hidden">
                <div id="readingContentNew" class="reading-content">
                    <div class="story-header-label">
                        <span>üìò</span>
                        <span>Verhaaltje</span>
                    </div>
                    <div class="story-text-content"></div>
                </div>
            </div>

            <!-- Question Box -->
            <div class="quiz-question-box">
                <div class="question-text" id="questionTextNew"></div>
            </div>

            <!-- Hint Container -->
            <div id="hintContainerNew" style="text-align: center; margin: 20px 0;"></div>

            <!-- L.O.V.A. Help Panel -->
            <div id="lovaHelpPanelNew" class="lova-help-panel hidden">
                <div class="lova-help-content">
                    <!-- Stap 1: Lezen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">üìñ Stap 1: Lezen</h4>
                        <div class="lova-help-section">
                            <p><strong>Wat wordt er gevraagd?</strong></p>
                            <p id="lovaHelpHoofdvraagNew" class="lova-help-text"></p>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Let op: dit is ruis (niet nodig voor deze vraag):</strong></p>
                            <ul id="lovaHelpRuisNew" class="lova-help-list"></ul>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Tussenstappen:</strong></p>
                            <ul id="lovaHelpTussenstappenNew" class="lova-help-list"></ul>
                        </div>
                    </div>

                    <!-- Stap 2: Ordenen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">üóÉÔ∏è Stap 2: Ordenen</h4>
                        <div class="lova-help-section">
                            <p><strong>Relevante getallen:</strong></p>
                            <ul id="lovaHelpGetallenNew" class="lova-help-list"></ul>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Wiskundige tool:</strong></p>
                            <p id="lovaHelpToolNew" class="lova-help-text"></p>
                        </div>
                    </div>

                    <!-- Stap 3: Vormen -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">‚úçÔ∏è Stap 3: Vormen</h4>
                        <div id="lovaHelpBewerkingenNew" class="lova-help-bewerkingen"></div>
                    </div>

                    <!-- Stap 4: Antwoorden -->
                    <div class="lova-help-step">
                        <h4 class="lova-help-step-title">‚úÖ Stap 4: Antwoorden</h4>
                        <div class="lova-help-section">
                            <p><strong>Verwachte eenheid:</strong> <span id="lovaHelpEenheidNew" class="lova-help-text"></span></p>
                        </div>
                        <div class="lova-help-section">
                            <p><strong>Logica check:</strong></p>
                            <p id="lovaHelpLogicaNew" class="lova-help-text"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Answer Options Container -->
            <div class="answers-section quiz-answers-wrapper">
                <div id="optionsContainerNew" class="options-container"></div>
                <textarea id="textareaAnswerNew" class="textarea-answer hidden" placeholder="Typ hier je antwoord..."></textarea>
            </div>

            <!-- Feedback Section -->
            <div id="feedbackSectionNew" class="feedback-card hidden">
                <!-- Encouraging Headline -->
                <h3 class="feedback-headline">
                    <span class="emoji" id="feedbackEmojiNew">ü§ó</span>
                    <span id="feedbackHeadlineNew">Bijna! Probeer het nog een keer!</span>
                </h3>

                <!-- Answer Confirmation -->
                <p class="feedback-answer-confirm" id="feedbackAnswerConfirmNew"></p>

                <!-- "Waarom?" Section -->
                <div class="feedback-section" id="feedbackWhySection">
                    <h4 class="feedback-section-title">Waarom?</h4>
                    <p class="feedback-section-content" id="feedbackWhyContentNew"></p>
                </div>

                <!-- "Zo werkt het:" Section (worked example) -->
                <div class="feedback-section" id="feedbackWorkedSection">
                    <h4 class="feedback-section-title">Zo werkt het:</h4>
                    <div class="feedback-worked-example" id="feedbackWorkedExampleNew"></div>
                </div>

                <!-- Tip for Next Time -->
                <div class="feedback-tip" id="feedbackTipSection">
                    <p class="feedback-tip-title">üí° Tip voor de volgende keer:</p>
                    <p class="feedback-tip-content" id="feedbackTipContentNew"></p>
                </div>

                <!-- Hidden elements for backward compatibility -->
                <div style="display: none;">
                    <div class="feedback-icon" id="feedbackIconNew"></div>
                    <h4 id="feedbackTitleNew"></h4>
                    <p id="feedbackMessageNew"></p>
                    <p id="correctAnswerDisplayNew" class="hidden"></p>
                    <div id="verhoudingstabelContainerNew"></div>
                    <p id="extraInfoDisplayNew" class="hidden"></p>
                    <div id="strategyAndTipsNew" class="hidden">
                        <h4>Strategie</h4>
                        <p id="strategyTextNew"></p>
                        <h4>Tips</h4>
                        <ul id="tipsListNew"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Old Question Card Container (hidden) -->
        <div class="question-card">
            <div class="question-container">
                <div id="readingContent" class="reading-content hidden"></div>
                <div class="question-text" id="questionText"></div>

                <!-- Hint Container -->
                <div id="hintContainer" style="text-align: center; margin: 20px 0;"></div>

                <!-- L.O.V.A. Help Panel -->
                <div id="lovaHelpPanel" class="lova-help-panel hidden">
                    <div class="lova-help-content">
                        <!-- Stap 1: Lezen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">üìñ Stap 1: Lezen</h4>
                            <div class="lova-help-section">
                                <p><strong>Wat wordt er gevraagd?</strong></p>
                                <p id="lovaHelpHoofdvraag" class="lova-help-text"></p>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Let op: dit is ruis (niet nodig voor deze vraag):</strong></p>
                                <ul id="lovaHelpRuis" class="lova-help-list"></ul>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Tussenstappen:</strong></p>
                                <ul id="lovaHelpTussenstappen" class="lova-help-list"></ul>
                            </div>
                        </div>

                        <!-- Stap 2: Ordenen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">üóÉÔ∏è Stap 2: Ordenen</h4>
                            <div class="lova-help-section">
                                <p><strong>Relevante getallen:</strong></p>
                                <ul id="lovaHelpGetallen" class="lova-help-list"></ul>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Wiskundige tool:</strong></p>
                                <p id="lovaHelpTool" class="lova-help-text"></p>
                            </div>
                        </div>

                        <!-- Stap 3: Vormen -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">‚úçÔ∏è Stap 3: Vormen</h4>
                            <div id="lovaHelpBewerkingen" class="lova-help-bewerkingen"></div>
                        </div>

                        <!-- Stap 4: Antwoorden -->
                        <div class="lova-help-step">
                            <h4 class="lova-help-step-title">‚úÖ Stap 4: Antwoorden</h4>
                            <div class="lova-help-section">
                                <p><strong>Verwachte eenheid:</strong> <span id="lovaHelpEenheid" class="lova-help-text"></span></p>
                            </div>
                            <div class="lova-help-section">
                                <p><strong>Logica check:</strong></p>
                                <p id="lovaHelpLogica" class="lova-help-text"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Answer Options Container -->
            <div class="answers-section">
                <div id="optionsContainer" class="options-container"></div>
                <textarea id="textareaAnswer" class="textarea-answer hidden" placeholder="Typ hier je antwoord..."></textarea>
            </div>

            <!-- Feedback Section -->
            <div id="feedbackSection" class="feedback-card hidden">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <h4 id="feedbackTitle"></h4>
                <p id="feedbackMessage"></p>
                <p id="correctAnswerDisplay" class="hidden"></p>
                <div id="verhoudingstabelContainer"></div>
                <p id="extraInfoDisplay" class="hidden"></p>
                <div id="strategyAndTips" class="hidden">
                    <h4>Strategie</h4>
                    <p id="strategyText"></p>
                    <h4>Tips</h4>
                    <ul id="tipsList"></ul>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="quiz-actions">
            <button class="btn btn-primary-action" id="submitBtn" onclick="submitAnswer()">
                <i class="material-icons">check_circle</i> Check mijn antwoord!
            </button>
            <button class="btn btn-primary-action hidden" id="nextBtn" onclick="nextQuestion()">
                Volgende! <i class="material-icons">arrow_forward</i>
            </button>
        </div>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="results-container" style="display: none;">
        <div class="results-score" id="finalScore">0/0</div>
        <div class="results-message" id="resultsMessage">Fantastisch gewerkt! üåü</div>
        <button class="btn" onclick="goToLanding()">
            <i class="material-icons">refresh</i> Nog een keer oefenen!
        </button>
    </div>

    <!-- Review Page -->
    <div id="reviewPage" class="results-container" style="display: none;">
        <h2 style="color: var(--primary-color); margin-bottom: 20px;">üìö Leer van je fouten ‚Äî zo word je beter!</h2>
        <div class="results-score" id="reviewScore">0/0</div>
        <div class="results-message" id="reviewMessage">Kijk goed naar deze vragen ‚Äî elke fout maakt je slimmer! üí™</div>

        <div id="wrongAnswersContainer" style="margin-top: 30px;">
            <!-- Wrong answers will be dynamically inserted here -->
        </div>

        <button class="btn" onclick="goToLanding()" style="margin-top: 30px;">
            <i class="material-icons">refresh</i> Nog een keer oefenen!
        </button>
    </div>

    <!-- Foutanalyse Modaal -->
    <div id="foutanalyseModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2 id="modaalTitle">üí° Bijna! Je komt er wel! üëÄ‚ú®</h2>
                <button class="modaal-close" onclick="closeFoutanalyseModaal()">‚úï</button>
            </div>

            <div id="errorBadge" class="error-badge"></div>

            <div class="fault-analysis-section">
                <h3>Laten we samen kijken! üí°</h3>
                <p id="mainExplanation" class="main-explanation"></p>

                <div id="reflectionBox" class="reflection-box" style="display: none;">
                    <div class="reflection-header">
                        <span class="reflection-icon">ü§î</span>
                        <strong>REFLECTIEVRAAG:</strong>
                    </div>
                    <p id="reflectionText" class="reflection-text"></p>
                </div>
            </div>

            <div id="visualAidSection" class="visual-aid-section" style="display: none;">
                <h4>
                    <span class="visual-icon">üìä</span>
                    <span id="visualAidTitle"></span>
                </h4>
                <div id="visualAidContent" class="visual-content"></div>
                <button id="videoButton" class="video-button" style="display: none;">
                    ‚ñ∂Ô∏è Bekijk Uitleg: <span id="videoTitle"></span>
                </button>
            </div>

            <div id="remedialSection" class="remedial-section" style="display: none;">
                <div class="remedial-alert">
                    üí™ Extra oefening maakt je sterker!
                </div>
                <p id="remedialExplanation" class="remedial-explanation"></p>
                <button id="remedialCta" class="remedial-cta">
                    <span class="cta-icon">üéØ</span>
                    <span id="remedialCtaText" class="cta-text"></span>
                </button>
                <div class="exercise-info">
                    <span class="info-icon">‚ÑπÔ∏è</span>
                    <span>5 eenvoudige oefenopgaven</span>
                </div>
            </div>

            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="closeFoutanalyseModaal()">
                    Probeer Opnieuw
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modaal -->
    <div id="successModaal" class="modaal-overlay">
        <div class="modaal-content">
            <div class="modaal-header">
                <h2>‚úÖ Goed gedaan! Hier is de uitleg</h2>
                <button class="modaal-close" onclick="closeSuccessModaal()">‚úï</button>
            </div>

            <div class="lova-accordion">
                <button class="accordion-toggle" onclick="toggleLovaAccordion()">
                    <span id="lovaToggleIcon">‚ñº</span>
                    üìö L.O.V.A. Stappenplan (klik om uit te klappen)
                </button>
                <div id="lovaContent" class="accordion-content">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <div class="berekening-section">
                <h3>üßÆ Berekening Stap voor Stap</h3>
                <div id="berekeningTable"></div>
            </div>

            <div class="concept-box">
                <h3>üí° Dit moet je weten</h3>
                <p id="conceptText"></p>
            </div>

            <div class="modaal-actions">
                <button class="btn btn-primary" onclick="nextQuestion()">
                    Volgende Vraag
                </button>
            </div>
        </div>
    </div>

    <!-- Accessibility Panel -->
    <div class="accessibility-panel" id="accessibilityPanel">
        <h3>‚ôø Toegankelijkheidsopties</h3>

        <div class="accessibility-option">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="option-icon">üî†</span>
                <span style="font-weight: 600;">Lettergrootte</span>
            </div>
            <div class="font-size-group">
                <button class="font-size-btn active" data-size="standard">Standaard</button>
                <button class="font-size-btn" data-size="groot">Groot</button>
                <button class="font-size-btn" data-size="extra-groot">Extra Groot</button>
            </div>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="dyslexiaMode">
                <span class="option-icon">üß†</span>
                <span>Dyslexie-modus (Lexend)</span>
            </label>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="focusMode">
                <span class="option-icon">üéØ</span>
                <span>Focus-modus (minimale afleiding)</span>
            </label>
        </div>

        <div class="accessibility-option">
            <label>
                <input type="checkbox" id="highContrastMode">
                <span class="option-icon">üé®</span>
                <span>Hoog contrast</span>
            </label>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="verhoudingstabel-widget.js"></script>
    <script src="foutanalyse-modaal.js"></script>
    <script src="app.js"></script>
    <script src="accessibility.js"></script>

    <script>
        // On page load, check if we have quiz data in sessionStorage
        document.addEventListener('DOMContentLoaded', function() {
            const quizState = sessionStorage.getItem('quizState');

            if (!quizState) {
                // No quiz state found, redirect to home
                alert('Geen quiz data gevonden. Je wordt teruggestuurd naar de homepagina.');
                window.location.href = 'index.html';
                return;
            }

            // Quiz state exists, let app.js handle loading it
            // The quiz should already start automatically via the modified app.js
        });

        // Override goToLanding to redirect to index.html
        function goToLanding() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
